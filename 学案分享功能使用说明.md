# 学案分享功能使用说明

## 功能概述

教师端学案页面新增了"分享学案"功能，支持将生成的学案文档分享到微信或保存到手机，方便教师将教学材料分享给同事或学生家长。

## 功能特性

### 1. 多种分享方式
- **分享给微信好友**: 通过打开文档后使用系统分享功能
- **保存到手机**: 将学案文件保存到手机本地存储
- **复制文本内容**: 一键复制学案内容到剪贴板，可在微信中粘贴分享

### 2. 小程序卡片分享（备用方案）
如果无法直接分享文档，系统会提供小程序卡片分享方式，接收方可以在小程序中查看完整学案内容。

## 使用流程

### 步骤1: 进入学案页面
1. 在教师端主界面，点击"我的学案"
2. 查看已生成的学案列表

### 步骤2: 选择要分享的学案
1. 找到想要分享的学案材料
2. 点击该学案右侧的**"分享学案"**按钮（绿色按钮）

### 步骤3: 选择分享方式
系统会弹出选项菜单，包含以下选项：

#### 选项1: 分享给微信好友
- 系统会自动打开学案文档
- 在打开的文档页面，点击右上角的分享图标
- 选择分享到微信好友或微信群
- 接收方可以直接查看或下载学案文档

#### 选项2: 保存到手机
- 学案文件会保存到手机本地存储
- 可以选择立即打开文件查看
- 保存后可以通过手机文件管理器找到该文件

#### 选项3: 复制文本内容
- 学案内容会复制到剪贴板
- 可以在微信聊天中长按粘贴
- 适合快速分享文字内容

### 步骤4: 完成分享
根据选择的方式完成分享操作即可。

## 学案内容格式

生成的学案包含以下内容：

### 基本信息
- 学案标题
- 班级正确率统计
- 作业类型说明
- 知识点列表

### 练习内容
每个练习题包含：
- 知识点名称
- 题目内容
- 练习题（含选项）
- 正确答案
- 详细解析
- 变式练习题

### 综合练习
- 知识迁移练习
- 综合题目
- 答案和解析

### 总结部分
- 知识点总结
- 语法规则要点
- 教学建议
- 课后作业
- 教学反思

### 元数据
- 生成时间
- 班级正确率
- 作业标题
- 材料类型
- 作业ID

## 技术说明

### 文件格式
- 文件格式: `.txt` 文本文件
- 编码: UTF-8
- 内容格式: Markdown格式，便于阅读

### 存储位置
- 临时文件: `wx.env.USER_DATA_PATH`
- 保存文件: 通过 `wx.saveFile` API 保存到用户文件目录

### 分享机制
1. **文档分享**: 使用 `wx.openDocument` 打开文档，通过系统分享功能分享
2. **小程序卡片**: 使用 `onShareAppMessage` 配置分享信息
3. **剪贴板**: 使用 `wx.setClipboardData` 复制内容

## 常见问题

### Q1: 为什么无法打开文档？
**A**: 可能是以下原因：
- 手机系统不支持txt文件预览
- 小程序权限限制
- 解决方案: 选择"复制文本内容"方式，然后在微信中粘贴分享

### Q2: 分享的文件在哪里？
**A**: 
- 通过"保存到手机"方式保存的文件在手机的微信文件存储目录
- 可以在微信的"文件管理"或手机的文件管理器中找到

### Q3: 可以分享给多个好友吗？
**A**: 
- 可以，打开文档后可以多次使用右上角分享按钮
- 或者使用"复制文本内容"后多次粘贴分享

### Q4: 接收方如何查看学案？
**A**: 
- **文档分享**: 接收方点击文件即可查看或下载
- **小程序卡片**: 接收方点击卡片进入小程序查看完整内容
- **文本复制**: 接收方直接在聊天窗口查看文本内容

### Q5: 学案内容可以编辑吗？
**A**: 
- txt文件可以在电脑上用记事本等文本编辑器打开编辑
- 手机上可以使用WPS、微软Word等应用打开编辑

## 注意事项

1. **文件大小**: 学案文件通常较小（几KB到几十KB），不会占用太多空间
2. **网络要求**: 小程序卡片分享需要网络连接
3. **权限要求**: 
   - 保存文件需要存储权限
   - 分享功能需要用户手动操作，符合微信规范
4. **兼容性**: 
   - 文档分享功能在不同手机系统上表现可能不同
   - 建议提供多种分享方式供用户选择

## 更新日志

### v1.0 (2025-10-13)
- ✅ 新增"分享学案"按钮
- ✅ 实现多种分享方式（微信好友、保存到手机、复制内容）
- ✅ 支持小程序卡片分享备用方案
- ✅ 优化学案内容格式
- ✅ 删除PPT功能，专注学案功能

## 未来规划

- [ ] 支持导出为真正的Word文档格式(.docx)
- [ ] 支持导出为PDF格式
- [ ] 支持批量分享多个学案
- [ ] 支持自定义学案模板
- [ ] 支持学案内容在线预览和编辑

## 技术支持

如有问题或建议，请联系技术支持团队。

