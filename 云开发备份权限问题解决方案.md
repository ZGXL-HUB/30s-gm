# äº‘å¼€å‘å¤‡ä»½æƒé™é—®é¢˜è§£å†³æ–¹æ¡ˆ

## é—®é¢˜æè¿°

æ‚¨é‡åˆ°çš„é”™è¯¯ä¿¡æ¯æ˜¾ç¤ºï¼š
```
cloudBackupManager.js:368 åˆ›å»ºé›†åˆ teacher_backups å¤±è´¥: Error: errCode: -502005 database collection not exists | errMsg: [ResourceNotFound] Db or Table not exist.
```

è¿™ä¸ªé”™è¯¯è¡¨ç¤ºäº‘å¼€å‘æ•°æ®åº“ä¸­ç¼ºå°‘ `teacher_backups` é›†åˆï¼Œä¸”æ— æ³•è‡ªåŠ¨åˆ›å»ºã€‚

## å¿«é€Ÿè§£å†³æ–¹æ¡ˆ

### æ–¹æ³•ä¸€ï¼šè¿è¡Œè‡ªåŠ¨ä¿®å¤è„šæœ¬ï¼ˆæ¨èï¼‰

1. **åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­æ‰“å¼€æ§åˆ¶å°**
   - æŒ‰ `Ctrl+Shift+I` æ‰“å¼€è°ƒè¯•å™¨
   - åˆ‡æ¢åˆ° "Console" æ ‡ç­¾é¡µ

2. **å¤åˆ¶å¹¶è¿è¡Œä¿®å¤è„šæœ¬**
   ```javascript
   // å°† fix_cloud_backup_permissions.js ä¸­çš„ä»£ç å¤åˆ¶åˆ°æ§åˆ¶å°å¹¶è¿è¡Œ
   ```

3. **ç­‰å¾…ä¿®å¤å®Œæˆ**
   - è„šæœ¬ä¼šè‡ªåŠ¨åˆ›å»ºå¿…è¦çš„æ•°æ®åº“é›†åˆ
   - éªŒè¯ä¿®å¤ç»“æœ

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨åˆ›å»ºé›†åˆ

1. **è®¿é—®äº‘å¼€å‘æ§åˆ¶å°**
   - æ‰“å¼€ï¼šhttps://console.cloud.tencent.com/tcb
   - é€‰æ‹©ç¯å¢ƒï¼š`cloud1-4gyu3i1id5f4e2fa`

2. **åˆ›å»ºæ•°æ®åº“é›†åˆ**
   - ç‚¹å‡»å·¦ä¾§èœå• "æ•°æ®åº“"
   - ç‚¹å‡» "æ–°å»ºé›†åˆ"
   - åˆ›å»ºé›†åˆï¼š`teacher_backups`
   - åˆ›å»ºé›†åˆï¼š`teacher_sync`

3. **è®¾ç½®é›†åˆæƒé™**
   - é€‰æ‹©é›†åˆ â†’ æƒé™è®¾ç½®
   - è®¾ç½®ä¸ºï¼š**ä»…åˆ›å»ºè€…å¯è¯»å†™**

### æ–¹æ³•ä¸‰ï¼šä½¿ç”¨æ§åˆ¶å°è„šæœ¬

åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·æ§åˆ¶å°ä¸­è¿è¡Œï¼š

```javascript
// å¿«é€Ÿåˆ›å»ºé›†åˆè„šæœ¬
async function quickFix() {
  try {
    // åˆ›å»º teacher_backups é›†åˆ
    await wx.cloud.database().collection('teacher_backups').add({
      data: { _id: 'init', createTime: new Date() }
    });
    await wx.cloud.database().collection('teacher_backups').doc('init').remove();
    console.log('âœ… teacher_backups é›†åˆåˆ›å»ºæˆåŠŸ');
    
    // åˆ›å»º teacher_sync é›†åˆ
    await wx.cloud.database().collection('teacher_sync').add({
      data: { _id: 'init', createTime: new Date() }
    });
    await wx.cloud.database().collection('teacher_sync').doc('init').remove();
    console.log('âœ… teacher_sync é›†åˆåˆ›å»ºæˆåŠŸ');
    
    console.log('ğŸ‰ ä¿®å¤å®Œæˆï¼');
  } catch (error) {
    console.error('âŒ ä¿®å¤å¤±è´¥:', error);
  }
}

quickFix();
```

## éªŒè¯ä¿®å¤ç»“æœ

è¿è¡Œä»¥ä¸‹ä»£ç éªŒè¯é›†åˆæ˜¯å¦åˆ›å»ºæˆåŠŸï¼š

```javascript
// éªŒè¯é›†åˆåˆ›å»ºç»“æœ
async function verifyFix() {
  const collections = ['teacher_backups', 'teacher_sync'];
  
  for (const name of collections) {
    try {
      await wx.cloud.database().collection(name).limit(1).get();
      console.log(`âœ… ${name}: å­˜åœ¨`);
    } catch (error) {
      console.log(`âŒ ${name}: ä¸å­˜åœ¨`);
    }
  }
}

verifyFix();
```

## é¢„é˜²æªæ–½

1. **å®šæœŸæ£€æŸ¥é›†åˆçŠ¶æ€**
2. **ç›‘æ§é”™è¯¯æ—¥å¿—**
3. **å¤‡ä»½é‡è¦æ•°æ®**

## å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ä¸ªé”™è¯¯ï¼Ÿ
A: é¦–æ¬¡ä½¿ç”¨äº‘ç«¯å¤‡ä»½åŠŸèƒ½æ—¶ï¼Œäº‘æ•°æ®åº“ä¸­çš„é›†åˆè¿˜æ²¡æœ‰è¢«åˆ›å»ºã€‚

### Q: åˆ›å»ºé›†åˆåæ•°æ®ä¼šä¸¢å¤±å—ï¼Ÿ
A: ä¸ä¼šã€‚åˆ›å»ºé›†åˆåªæ˜¯åˆ›å»ºå­˜å‚¨ç»“æ„ï¼Œä¸ä¼šå½±å“ç°æœ‰æ•°æ®ã€‚

### Q: å¦‚æœä¿®å¤è„šæœ¬å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
A: è¯·æ£€æŸ¥ï¼š
1. äº‘å¼€å‘ç¯å¢ƒæ˜¯å¦æ­£ç¡®é…ç½®
2. ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
3. æ˜¯å¦æœ‰è¶³å¤Ÿçš„æƒé™åˆ›å»ºé›†åˆ

## è”ç³»æ”¯æŒ

å¦‚æœä»¥ä¸Šæ–¹æ³•éƒ½æ— æ³•è§£å†³é—®é¢˜ï¼Œè¯·ï¼š
1. ä¿å­˜æ§åˆ¶å°çš„å®Œæ•´é”™è¯¯ä¿¡æ¯
2. æˆªå›¾æ˜¾ç¤ºé”™è¯¯è¯¦æƒ…
3. è”ç³»æŠ€æœ¯æ”¯æŒå›¢é˜Ÿ
