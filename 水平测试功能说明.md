# 语法水平测试功能说明

## 功能概述

水平测试是一个在用户首次登录时自动展示的语法能力评估系统，通过10道题目（5道语法选择题 + 5道书写填空题）来评估用户的语法水平，并根据测试结果提供个性化的学习建议。

## 功能特点

### 1. 自动触发
- 用户首次登录小程序时自动显示
- 只会在第一次登录时展示，后续不会重复显示
- 用户可点击任意位置退出测试

### 2. 测试内容
- **前5题：语法选择题**
  - 从语法选择题题库中随机抽取
  - 包含干扰项和正确答案
  - 提供详细解析
  
- **后5题：书写填空题**
  - 从书写规范题库中随机抽取
  - 用户输入答案后自动判断对错
  - 提供正确答案和解析

### 3. 进度显示
- 实时进度条显示测试进度
- 语法题完成后显示鼓励提示
- 书写题完成后显示完成提示

### 4. 结果评估
- 根据正确率计算等级（level1-level5）
- 分别评估语法和书写能力
- 生成个性化学习建议

## 等级评定标准

| 等级 | 正确率范围 | 评价描述 |
|------|------------|----------|
| level1 | 0-39% | 较为薄弱 |
| level2 | 40-59% | 稍弱 |
| level3 | 60-79% | 不错哦 |
| level4 | 80-99% | 超棒的 |
| level5 | 100% | 简直完美 |

## 学习建议生成逻辑

### 总正确率 > 81%
- **推荐模块：** 系统推荐模块
- **功能描述：** 可以直接练习高考常见配比的语法十题和自由组合不同语法专题
- **学习建议：** 建议搭配主页的进阶之旅，更快发现薄弱点，将薄弱点放进专属组合每天练，下个语法大神就是你

### 总正确率 61-81%
- **推荐模块：** 进阶之旅
- **功能描述：** 可以直接察觉自己不会的小语法点
- **学习建议：** 建议每周突破一个小点，超稳的

### 总正确率 41-61%
- **推荐模块：** 根据书写和语法正确率对比决定
  - 书写正确率 > 语法正确率：进阶之旅
  - 书写正确率 < 语法正确率：书写规范（界面二）
- **学习建议：** 针对性建议

### 总正确率 < 41%
- **推荐模块：** 书写规范（界面二）
- **功能描述：** 可以帮您先纠正书写错误，理清楚各种词长什么样、怎么写
- **学习建议：** 建议每周练会一个表格，配上您的绝佳理解力，前期稳后续进步会超快

## 文件结构

```
miniprogram/pages/level-test/
├── index.js          # 页面逻辑
├── index.wxml        # 页面模板
├── index.wxss        # 页面样式
└── index.json        # 页面配置
```

## 使用方法

### 1. 自动触发
- 用户首次登录小程序时自动显示
- 无需手动调用

### 2. 手动调用（开发测试用）
```javascript
wx.navigateTo({
  url: '/pages/level-test/index'
});
```

### 3. 检查测试状态
```javascript
const levelTestCompleted = wx.getStorageSync('levelTestCompleted');
const testResults = wx.getStorageSync('levelTestResults');
```

## 技术实现

### 1. 题目抽取
- 语法题：从备用题库中随机抽取5道
- 书写题：从writing_exercise_questions.js中随机抽取5道

### 2. 答案验证
- 语法题：选项匹配验证
- 书写题：支持多答案格式（如 "which / that"）

### 3. 状态管理
- 使用Page的data管理测试状态
- 本地存储保存测试结果

### 4. 界面切换
- 欢迎界面 → 语法测试 → 过渡界面 → 书写测试 → 结果界面

## 注意事项

1. **首次登录检测：** 通过本地存储`levelTestCompleted`标识
2. **题目随机性：** 每次测试题目顺序和内容都不同
3. **退出机制：** 用户可随时退出，不会强制完成
4. **结果持久化：** 测试完成后结果保存到本地存储
5. **响应式设计：** 支持不同屏幕尺寸的适配

## 扩展功能

### 1. 云数据库集成
- 可将测试结果上传到云数据库
- 支持多设备同步测试结果

### 2. 历史记录
- 显示用户历次测试结果
- 跟踪学习进度变化

### 3. 个性化推荐
- 根据测试结果推荐具体练习内容
- 动态调整学习路径

### 4. 社交功能
- 分享测试结果
- 好友排行榜

## 测试验证

功能已通过以下测试：
- ✅ 页面路由配置
- ✅ 题目抽取逻辑
- ✅ 答案验证机制
- ✅ 等级计算算法
- ✅ 建议生成逻辑
- ✅ 界面状态切换
- ✅ 数据持久化

## 总结

水平测试功能为用户提供了科学的语法能力评估，通过个性化的学习建议帮助用户找到最适合的学习路径。该功能设计合理、交互友好、逻辑清晰，能够有效提升用户的学习体验和学习效果。
