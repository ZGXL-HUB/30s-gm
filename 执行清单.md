# 语法组合功能安全迁移 - 执行清单

## 📋 执行前准备

### 文件检查
- [ ] `cloudfunctions/grammarCategoryMapping/` 文件夹存在
- [ ] `cloudfunctions/getQuestionsData/index.js` 已更新
- [ ] `complete_migration_script.js` 已生成（1890道题目）
- [ ] `validate_migration_script.js` 已生成
- [ ] `rollback_script.js` 已生成

## 🚀 执行步骤

### 步骤1：部署云函数
- [ ] 部署 `grammarCategoryMapping` 云函数
- [ ] 部署 `getQuestionsData` 云函数
- [ ] 确认两个云函数都部署成功

### 步骤2：数据迁移
- [ ] 在云开发控制台执行 `complete_migration_script.js`
- [ ] 等待迁移完成（1890道题目）
- [ ] 执行 `validate_migration_script.js` 验证结果

### 步骤3：功能测试
- [x] 测试系统推荐组合功能
- [x] 测试自定义组合功能
- [x] 测试练习功能
- [x] 确认所有功能正常

### 步骤4：清理
- [x] 删除 `miniprogram/data/intermediate_questions.js` (已替换为云数据加载)
- [x] 检查主包大小是否优化

## ⚠️ 注意事项

1. **必须按顺序执行**，不能跳过任何步骤
2. **先部署云函数**，再执行数据迁移
3. **功能测试通过后**，再删除本地数据文件
4. **如有问题**，立即执行回滚方案

## 🆘 紧急回滚

如果出现严重问题：
1. 执行 `rollback_script.js`
2. 参考 `complete_rollback_plan.md` 恢复前端代码
3. 验证功能恢复正常

---

**预期结果**：语法组合功能完全保持，主包大小优化，性能提升 ✅
