# 教师学生界面交互流程图

## 系统整体架构图

```mermaid
graph TB
    A[用户进入小程序] --> B{选择身份}
    B -->|教师| C[教师端主界面]
    B -->|学生| D[学生端主界面]
    
    C --> E[创建作业]
    C --> F[作业管理]
    C --> G[生成讲评材料]
    
    D --> H[作业列表]
    D --> I[开始练习]
    D --> J[查看结果]
    
    E --> K[作业数据存储]
    K --> L[学生端接收作业]
    L --> H
    
    I --> M[练习完成]
    M --> N[结果存储]
    N --> F
```

## 教师端详细流程图

```mermaid
flowchart TD
    A[教师登录] --> B[教师端主界面]
    B --> C[创建作业]
    B --> D[作业管理]
    
    C --> C1[填写作业信息]
    C1 --> C2[选择语法点]
    C2 --> C3[设置截止时间]
    C3 --> C4[配置变式题规则]
    C4 --> C5[预览作业]
    C5 --> C6[确认创建]
    C6 --> C7[保存到本地存储]
    C7 --> C8[分发给学生端]
    C8 --> D
    
    D --> D1[查看作业列表]
    D1 --> D2[选择作业]
    D2 --> D3{选择操作}
    D3 -->|查看详情| D4[作业详情页面]
    D3 -->|生成PPT| D5[生成PPT文件]
    D3 -->|生成Word| D6[生成Word文件]
    D3 -->|查看统计| D7[学生完成统计]
    
    D5 --> D8[模拟生成过程]
    D6 --> D8
    D8 --> D9[显示文件信息]
    
    D4 --> D10[显示作业内容]
    D4 --> D11[显示学生完成情况]
    D4 --> D12[显示错误率统计]
```

## 学生端详细流程图

```mermaid
flowchart TD
    A[学生登录] --> B[学生端主界面]
    B --> C[作业列表]
    
    C --> C1[查看待完成作业]
    C --> C2[查看已完成作业]
    
    C1 --> D[选择作业]
    D --> E[开始练习]
    E --> F[答题过程]
    F --> G[提交答案]
    G --> H[自动批改]
    H --> I[显示结果]
    I --> J[保存结果]
    J --> K[更新作业状态]
    K --> C2
    
    C2 --> L[查看历史结果]
    L --> M[查看错题分析]
    L --> N[查看能力提升]
```

## 数据流转图

```mermaid
sequenceDiagram
    participant T as 教师
    participant TS as 教师端存储
    participant SS as 学生端存储
    participant S as 学生
    
    T->>TS: 创建作业
    TS->>SS: 分发作业数据
    SS->>S: 显示新作业
    
    S->>SS: 完成作业
    SS->>TS: 更新完成状态
    TS->>T: 显示完成统计
    
    T->>TS: 生成讲评材料
    TS->>T: 返回文件信息
```

## 核心功能模块图

```mermaid
graph LR
    subgraph "教师端功能"
        A1[作业创建模块]
        A2[作业管理模块]
        A3[数据统计模块]
        A4[文件生成模块]
    end
    
    subgraph "学生端功能"
        B1[作业接收模块]
        B2[练习答题模块]
        B3[结果查看模块]
        B4[错题分析模块]
    end
    
    subgraph "数据存储"
        C1[本地存储]
        C2[作业数据]
        C3[学生结果]
        C4[统计数据]
    end
    
    A1 --> C2
    A2 --> C2
    A3 --> C4
    A4 --> C2
    
    B1 --> C2
    B2 --> C3
    B3 --> C3
    B4 --> C3
    
    C2 --> B1
    C3 --> A3
```

## 用户操作时序图

```mermaid
sequenceDiagram
    participant U as 用户
    participant UI as 界面
    participant LS as 本地存储
    participant API as 模拟API
    
    Note over U,API: 教师创建作业流程
    U->>UI: 点击创建作业
    UI->>UI: 显示创建表单
    U->>UI: 填写作业信息
    U->>UI: 选择语法点
    U->>UI: 设置截止时间
    U->>UI: 点击创建
    UI->>LS: 保存作业数据
    LS->>LS: 分发给学生端
    UI->>U: 显示创建成功
    
    Note over U,API: 学生完成作业流程
    U->>UI: 查看作业列表
    UI->>LS: 获取作业数据
    LS->>UI: 返回作业列表
    UI->>U: 显示作业
    U->>UI: 点击开始练习
    UI->>UI: 显示题目
    U->>UI: 提交答案
    UI->>LS: 保存结果
    UI->>U: 显示完成结果
    
    Note over U,API: 教师查看统计流程
    U->>UI: 查看作业管理
    UI->>LS: 获取作业数据
    LS->>UI: 返回统计数据
    UI->>U: 显示完成情况
    U->>UI: 生成讲评材料
    UI->>API: 模拟生成文件
    API->>UI: 返回文件信息
    UI->>U: 显示生成成功
```

## 界面状态转换图

```mermaid
stateDiagram-v2
    [*] --> 登录页面
    登录页面 --> 教师主界面 : 教师登录
    登录页面 --> 学生主界面 : 学生登录
    
    教师主界面 --> 创建作业页面 : 点击创建作业
    教师主界面 --> 作业管理页面 : 点击作业管理
    
    创建作业页面 --> 作业管理页面 : 创建成功
    创建作业页面 --> 教师主界面 : 取消创建
    
    作业管理页面 --> 作业详情页面 : 点击查看详情
    作业管理页面 --> 文件生成页面 : 点击生成文件
    作业管理页面 --> 教师主界面 : 返回
    
    学生主界面 --> 作业列表页面 : 点击作业列表
    
    作业列表页面 --> 练习页面 : 点击开始练习
    作业列表页面 --> 结果页面 : 点击查看结果
    作业列表页面 --> 学生主界面 : 返回
    
    练习页面 --> 结果页面 : 完成练习
    练习页面 --> 作业列表页面 : 取消练习
    
    结果页面 --> 作业列表页面 : 返回
    结果页面 --> 错题分析页面 : 点击错题分析
```

## 数据模型关系图

```mermaid
erDiagram
    教师 ||--o{ 作业 : 创建
    学生 ||--o{ 作业结果 : 完成
    作业 ||--o{ 作业结果 : 包含
    
    教师 {
        string teacherId
        string name
        string class
    }
    
    学生 {
        string studentId
        string name
        string class
    }
    
    作业 {
        string assignmentId
        string title
        string description
        string deadline
        array questions
        string variantMode
        object variantRules
        string status
        datetime createdAt
    }
    
    作业结果 {
        string resultId
        string assignmentId
        string studentId
        array answers
        number accuracy
        datetime completedAt
        string status
    }
```

## 功能特性说明

### 教师端核心功能
1. **作业创建**：支持语法点选择、截止时间设置、变式题配置
2. **作业管理**：查看所有作业状态、学生完成情况、统计数据
3. **文件生成**：生成PPT和Word格式的讲评材料
4. **数据统计**：查看班级整体完成率和正确率

### 学生端核心功能
1. **作业接收**：自动接收教师分配的作业
2. **在线练习**：支持语法选择题练习
3. **自动批改**：实时显示答题结果和正确率
4. **结果查看**：查看历史作业完成情况

### 数据存储机制
1. **本地存储**：使用微信小程序本地存储API
2. **数据同步**：教师创建作业后自动同步到学生端
3. **状态管理**：实时更新作业完成状态和统计数据

### 用户体验优化
1. **简化界面**：隐藏不必要的功能按钮
2. **清晰导航**：明确的页面跳转和返回逻辑
3. **即时反馈**：操作后立即显示结果和状态
4. **错误处理**：友好的错误提示和异常处理
