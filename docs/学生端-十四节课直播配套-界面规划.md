# 十四节课直播配套 · 学生端界面规划

> 基于活动安排数据表，规划与直播各环节对应的小程序学生界面，供确认后实现。

---

## 一、整体定位与入口

| 项目 | 说明 |
|------|------|
| **定位** | 直播课学生端：扫码进入当节课的「活动」完成检测/练习，与教师端（布置作业、备课）并列。 |
| **入口方式** | ① 课前/课中教师发到群里的 **活动码/小程序码**（带参数如 `scene=activityId=xxx` 或 `activityId=xxx`）；② 回放中的小程序链接。 |
| **与现有学生端关系** | 现有 `student-join-class`、`student-assignment-list` 保留（班级作业场景）；直播场景用「活动」串联，可共用一个「学生身份」与学习记录。 |

**建议入口结构：**

- **教师/学生角色**：可在「我的」或启动时选择身份，或根据扫码进入的页面自动识别（扫活动码→学生活动流，扫教师码→教师端）。
- **直播学生主入口**：扫活动码 → 解析 `activityId`（或课程节次）→ 进入「本课活动首页」。

---

## 二、活动（单节课）数据模型（建议）

为支撑多环节、多题型，建议有「活动」抽象：

- **活动** = 一节直播课（如第 3 课），包含多个**环节**。
- **环节** = 课前真题检测 / 关键词识别 / 填空运用 / 真题填空 / 翻译题 等，每个环节对应一种题型与一套题。

这样同一节课可配置：课前 1 个环节（真题变式）、课中 3 个可选环节（选择、填空×2）、课后 1 个环节（翻译）。

---

## 三、按时间线规划的学生界面

以下按「活动安排表」时间顺序，列出每个**需要或可选使用小程序**的环节对应的界面。

---

### 环节 0：活动首页（扫码落地页）

| 项目 | 内容 |
|------|------|
| **对应时段** | 课前 60 分钟 或 课中任意时刻扫码进入 |
| **目的** | 明确本节课、当前可用环节，减少迷失。 |
| **界面要点** | ① 课程名称 + 第 X 课；② 当前开放环节列表（如「课前·真题检测」「课中·关键词识别」等），未开放的可灰显或提示「直播 X 分钟后开放」；③ 若只有一个环节开放，可考虑直接跳转到该环节做题页。 |
| **数据** | 活动 ID、课程名、节次、环节列表及开放时间/状态。 |

---

### 环节 1：课前 60 分钟 · 真题检测（必做）

| 项目 | 内容 |
|------|------|
| **对应时段** | 课前 60 分钟，活动码发在群里。 |
| **别人需要看到的目的** | 认知自查；与课后复查形成闭环；拉非本校学生进私域。 |
| **形式** | 真题变式题（题型可为选择或填空，按你现有题库来）。 |
| **是否小程序** | **是**。 |

**界面规划：**

| 序号 | 界面名称 | 说明 |
|------|----------|------|
| 1.1 | **真题检测-做题页** | 题目列表（或单题逐题），题干 + 选项/填空；底部「上一题」「下一题」或题号切换；顶部显示进度（如 3/10）。 |
| 1.2 | **真题检测-提交/结果页** | 提交后显示：正确题数、正确率、简短反馈（如「不错，直播时重点听错题」）；可展示错题与正确答案/解析（可折叠）；按钮「去听直播」或「返回活动首页」。 |
| 1.3 | **防重复** | 若同一活动同一学生已提交过课前检测，扫码再进可优先展示「您已完成课前检测，正确率 XX%」，再提供「查看详情」和「进入直播/活动首页」。 |

**数据与逻辑：** 环节类型 `pre_class_test`，题目来源「真题变式」；记录提交时间、得分、正确率，供课中对比与教师端统计。

---

### 环节 2：直播 7–9 分钟 · 关键词识别检测（可选）

| 项目 | 内容 |
|------|------|
| **对应时段** | 直播 7–9 分钟。 |
| **目的** | 巩固「关键词与答案形式」的对应；让所有人跟上；收集对形式的偏好。 |
| **形式** | 10 道题：前 8 题为选择题（只测标志词 / 只测对应词法 / 只测该词法书写），最后 2 题为反馈题。 |
| **是否小程序** | **可选**。 |

**界面规划：**

| 序号 | 界面名称 | 说明 |
|------|----------|------|
| 2.1 | **关键词识别-做题页** | 与 1.1 类似的做题体验：选择题，逐题或题号切换，进度 1/10…10/10。 |
| 2.2 | **关键词识别-第 9、10 题（反馈题）** | 第 9 题：「你掌握了什么？」（单选/多选预设选项或简短填空）；第 10 题：「你偏好用小程序检测还是直接打在公屏上？」（单选）。 可单独一个「反馈题」组件或同一做题页内题型切换。 |
| 2.3 | **关键词识别-结果页** | 正确率、正确题数；可简要展示对错；反馈题结果仅后台统计、可不给学生详细页，或给一句「感谢反馈」。 |

**数据：** 环节类型 `keyword_check`；记录每道题的答案 + 两道反馈题的选项，便于你后续分析「不同形式的方便程度和必要性」。

---

### 环节 3：直播 10–12 分钟 · 填空题运用规则（可选）

| 项目 | 内容 |
|------|------|
| **对应时段** | 直播 10–12 分钟。 |
| **目的** | 运用实践；检测认知。 |
| **形式** | 10 题填空，**自动核对**；不同正确率给不同鼓励话术；**中途退出挽留**。 |
| **是否小程序** | **可选**。 |

**界面规划：**

| 序号 | 界面名称 | 说明 |
|------|----------|------|
| 3.1 | **填空运用-做题页** | 题干中含空（一个或多个空），学生输入答案；可「逐空核对」或「本题全部填完再核对」；核对后即时显示对错（✓/✗），可展示正确答案。 |
| 3.2 | **填空运用-即时反馈** | 单题或单空核对后：正确→简短鼓励（如「对了！」）；错误→显示正确答案 + 一句规则提示。 |
| 3.3 | **中途退出挽留** | 未提交就退出（返回、切后台、关闭）时：弹窗「做完再走，效果更好哦～」+「继续完成」「暂时离开」。 |
| 3.4 | **填空运用-结果页** | 10 题全部完成后：正确率、鼓励话术（根据正确率分档：如 &lt;60% / 60–80% / &gt;80% 不同文案）；「继续听直播」等。 |

**数据：** 环节类型 `fill_rule`；记录每空对错、每题得分、完成率，用于话术分档与教师端统计。

---

### 环节 4：直播 13–15 分钟 · 填空运用到真题（可选）

| 项目 | 内容 |
|------|------|
| **对应时段** | 直播 13–15 分钟。 |
| **目的** | 再次实践；检测学习成果；**对比一开始的正确率**给出反馈和鼓励。 |
| **形式** | 近三年真题填空，自动核对；与**环节 1 课前检测**正确率对比。 |
| **是否小程序** | **可选**。 |

**界面规划：**

| 序号 | 界面名称 | 说明 |
|------|----------|------|
| 4.1 | **真题填空-做题页** | 与 3.1 一致的填空 + 即时核对体验。 |
| 4.2 | **真题填空-结果页（含对比）** | ① 本环节正确率；② 与「课前 60 分钟」正确率对比（如「课前 XX% → 现在 XX%，提升了 X 个百分点」）；③ 根据提升幅度给不同鼓励话术（提升明显 / 持平 / 略降的差异化文案）。 |
| 4.3 | **挽留** | 同 3.3，中途退出可挽留。 |

**数据：** 环节类型 `fill_real_exam`；依赖环节 1 的提交记录做对比；若未做课前检测，对比处可显示「未参与课前检测，仅展示本次正确率」。

---

### 环节 5：直播 22–25 分钟 · 小程序翻译题（必做）

| 项目 | 内容 |
|------|------|
| **对应时段** | 直播 22–25 分钟。 |
| **目的** | 回忆并写出刚讲的句子；语法使用；鼓励拉新。 |
| **形式** | 随机抽一句（PPT 上的例句中文），学生书写英文；提供**加练**选项；完成时鼓励 + 「您已完成今日学习，打卡发朋友圈吧」。 |
| **是否小程序** | **是**。 |

**界面规划：**

| 序号 | 界面名称 | 说明 |
|------|----------|------|
| 5.1 | **翻译题-题目页** | 展示一句**中文**（本课讲解的例句），学生输入英文答案；可支持多句中的「随机抽一句」或由教师配置固定一句。 |
| 5.2 | **翻译题-核对与反馈** | 提交后自动核对（可放宽同义表达或关键结构给对）；对/错 + 正确答案展示；鼓励文案。 |
| 5.3 | **翻译题-加练** | 完成 1 句后按钮「再加练一句」：再随机一句中文，流程同 5.1–5.2；可限制加练次数（如最多 2 句）避免拖长。 |
| 5.4 | **翻译题-完成页** | 文案：「您已完成今日学习，打卡发朋友圈吧」+ 分享/生成学习卡片按钮（可带课程名、第 X 课、日期）；可选「邀请同学」拉新入口。 |

**数据：** 环节类型 `translation`；题目来源为本课 5 个例句（中文→标准英文）；记录完成状态、加练次数，用于「今日学习完成」判断与运营统计。

---

## 四、通用组件与能力

以下在各环节中共用，便于统一体验与开发：

| 名称 | 用途 |
|------|------|
| **活动解析** | 从小程序码/链接中解析 `activityId`（及可选 `segmentId`），决定进入哪节课、哪一环节。 |
| **学生身份** | 微信 openid / 可选昵称头像；与现有 `student-join-class` 的 studentInfo 可统一，便于后续班级与直播数据打通。 |
| **环节状态** | 根据配置或教师端下发，标记环节是否「未开放 / 进行中 / 已结束」；未开放时提示「X 分钟后开始」。 |
| **鼓励话术配置** | 按正确率分档或按「对比课前提升」分档，文案可配置在云或配置表，便于你迭代话术。 |
| **挽留弹窗** | 统一「中途退出」拦截与挽留文案，在填空两环节复用。 |
| **分享/打卡** | 翻译题完成页的「打卡发朋友圈」、生成学习卡片（图片或分享文案），可复用同一套分享组件。 |

---

## 五、页面/路由结构建议（学生端）

便于你后续在 `app.json` 中挂载与分包，建议路由结构如下（仅学生直播相关）：

```
学生端-直播课
├── 活动首页          /pages/live/activity-index?activityId=xxx
├── 课前真题检测
│   ├── 做题页        /pages/live/pre-test?activityId=xxx
│   └── 结果页        (可与做题页同页切换，或 /pages/live/pre-test-result)
├── 关键词识别
│   ├── 做题页        /pages/live/keyword-check?activityId=xxx
│   └── 结果页        (同页或独立)
├── 填空运用规则
│   ├── 做题页        /pages/live/fill-rule?activityId=xxx
│   └── 结果页        (同页或独立)
├── 真题填空
│   ├── 做题页        /pages/live/fill-real?activityId=xxx
│   └── 结果页        (同页或独立，含对比)
├── 翻译题
│   ├── 做题/核对     /pages/live/translation?activityId=xxx
│   └── 完成页        /pages/live/translation-done (或同页)
└── 通用
    └── 分享/打卡     (弹窗或独立页，由完成页唤起)
```

- 若希望**控制包体**，可将 `pages/live/*` 做成**分包**，扫码只下载该分包。
- 若当前只做「课前检测 + 翻译题」两个必做环节，可先实现：活动首页、课前检测（做题+结果）、翻译题（做题+完成页）+ 通用挽留/话术/分享。

---

## 六、与现有能力的复用

| 现有能力 | 复用方式 |
|----------|----------|
| 题目数据（云/本地） | 课前真题变式、填空、翻译例句，可从现有语法题库/书写题/教师端选题逻辑中按「活动+环节」筛选或映射。 |
| 学生身份 | 与 `student-join-class`、`student-assignment-list` 共用 openid 与可选昵称；直播活动可先不强制班级，仅按 activityId 统计。 |
| 书写/填空 UI | 参考现有 `exercise-page`、`grammar-writing` 的表格或输入组件，做简化版（单空/单题核对、无复杂表格）。 |
| 选择题 UI | 参考 `grammar-test` 或教师端选择题展示，做单题切换与进度条。 |
| 云开发 | 活动配置、环节配置、题目拉取、提交记录、正确率统计，用云函数+云数据库；教师端可增加「创建直播活动」「配置环节与题目」的页面（后续迭代）。 |

---

## 七、实施顺序建议（供采纳后实现）

1. **数据与配置**：活动表、环节表（含类型、题目集 ID、开放时间）；与现有题目数据打通（按语法点/标签取题或单独配置题目 ID）。
2. **活动首页**：扫码进 → 解析 activityId → 展示课程名与可选环节；仅一个环节时可直接跳转。
3. **课前真题检测**：做题页 + 提交 + 结果页（正确率、错题）；记录到云。
4. **翻译题**：抽句、书写、核对、加练、完成页（鼓励 + 打卡/分享）。
5. **填空运用 + 真题填空**：共用填空做题组件；结果页做「与课前正确率对比」；挽留弹窗。
6. **关键词识别**：选择题 + 两道反馈题；结果页与数据上报。
7. **鼓励话术分档、分享卡片、教师端活动配置** 等按需迭代。

---

## 八、小结表（按环节）

| 环节 | 时段 | 是否小程序 | 题型 | 学生界面要点 |
|------|------|------------|------|----------------|
| 活动首页 | 扫码进入 | - | - | 课程名、环节列表、跳转各环节 |
| 课前真题检测 | 课前 60 分钟 | **是** | 真题变式（选择/填空） | 做题→提交→结果（正确率/错题）；防重复提示 |
| 关键词识别 | 7–9 分钟 | 可选 | 选择 10 题（含 2 反馈题） | 做题→结果；反馈题单独收集 |
| 填空运用规则 | 10–12 分钟 | 可选 | 填空 10 题 | 填空+即时核对+话术分档+挽留 |
| 填空到真题 | 13–15 分钟 | 可选 | 真题填空 | 同上+与课前正确率对比 |
| 翻译题 | 22–25 分钟 | **是** | 翻译 1 句+加练 | 中文→英文、核对、加练、完成页打卡/分享 |

以上为完整界面规划，可直接按「先做活动首页 + 课前检测 + 翻译题，再做三个可选环节」的顺序实现；你确认或调整后，再按该规划落地具体页面与接口。

---

## 九、已实现说明

- **入口**：扫码进入时请使用 `scene=activityId=lesson1`（或链接带 `activityId=lesson1`）；开发阶段可在「我的」页点击 **直播课（学生）** 进入活动首页（默认 lesson1）。
- **分包**：`pages/live` 已作为分包配置在 `app.json`，包含：activity-index、pre-test、keyword-check、fill-rule、fill-real、translation。
- **配置**：`miniprogram/config/liveActivityConfig.js` 中可修改每课语法点、翻译例句；`miniprogram/utils/liveService.js` 提供题目拉取、提交记录（当前为本地存储，可后续接云数据库）。
- **挽留**：填空运用、真题填空在未完成时点击「返回活动首页」会弹出挽留弹窗。
- **对比**：真题填空结果页会与课前检测正确率对比（若已做课前检测）；未做则仅展示本次正确率。
