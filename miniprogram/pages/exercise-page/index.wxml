<view class="container">
  <!-- é¡µé¢å¼•å¯¼å¡ç‰‡ -->
  <page-header-guide 
    title="è¯­æ³•ç»ƒä¹ ç­”é¢˜"
    description="æ ¹æ®é¢˜ç›®è¦æ±‚å¡«å†™ç­”æ¡ˆï¼Œç³»ç»Ÿä¼šå®æ—¶æ‰¹æ”¹å¹¶æ˜¾ç¤ºè§£æ"
    tip="ğŸ’¡ æç¤ºï¼šç­”é¢˜è¿‡ç¨‹ä¸­å¯ä»¥æŸ¥çœ‹ç›¸å…³ç¬”è®°å’Œè¡¨æ ¼è¾…åŠ©å­¦ä¹ "
    icon="âœï¸"
    storage-key="exercise-page-guide"
  />
  
  <!-- è¯­æ³•ç»ƒä¹ ç•Œé¢ -->
  <view wx:if="{{exerciseType === 'grammar'}}" class="question-list">
    <!-- ç©ºçŠ¶æ€æ˜¾ç¤º -->
    <view wx:if="{{!questions || questions.length === 0}}" class="empty-state">
      <text class="empty-text">æ²¡æœ‰ä¹ é¢˜</text>
      <text class="empty-subtext">æ­£åœ¨åŠ è½½é¢˜ç›®ï¼Œè¯·ç¨å€™...</text>
    </view>
    <!-- é¢˜ç›®åˆ—è¡¨ -->
    <view wx:else>
      <view wx:for="{{questions}}" wx:key="index" class="question-item" wx:class="{{results[index] ? (results[index].correct ? 'correct' : 'wrong') : ''}}">
        <view class="question-content-row">
          <text class="question-number">{{index + 1}}. {{item.text}}</text>
          <input 
            class="answer-input"
            type="text"
            value="{{answers[index]}}"
            bindinput="onInput"
            bindblur="onInputBlur"
            data-index="{{index}}"
            placeholder="è¯·è¾“å…¥ç­”æ¡ˆ"
            disabled="{{submitting}}"
          />
        </view>
        <view class="result" wx:if="{{results[index]}}">
          <text class="{{results[index].correct ? 'correct-text' : 'wrong-text'}}">
            {{results[index].correct ? 'âœ“ æ­£ç¡®' : 'âœ— é”™è¯¯'}}
          </text>
          <text class="answer-text" wx:if="{{!results[index].correct}}">
            æ­£ç¡®ç­”æ¡ˆï¼š{{results[index].answer}}
          </text>
          <view class="analysis-container" wx:if="{{results[index].analysis}}">
            <view class="analysis-header">
              <text class="analysis-icon">ğŸ’¡</text>
              <text class="analysis-title">è§£æ</text>
            </view>
            <view class="analysis-text {{results[index].analysis.length > 150 ? 'has-overflow' : ''}}">
              <text class="analysis-content">
                {{results[index].analysis}}
              </text>
            </view>
          </view>
        </view>
        <!-- æ–°å¢ï¼šå®æ—¶æ‰¹æ”¹çŠ¶æ€æ˜¾ç¤º -->
        <view class="real-time-status" wx:if="{{results[index] && answers[index]}}">
          <text class="status-text {{results[index].correct ? 'status-correct' : 'status-wrong'}}">
            {{results[index].correct ? 'âœ“' : 'âœ—'}}
          </text>
        </view>
        
        <!-- æ–°å¢ï¼šç¬”è®°å’Œè¡¨æ ¼æ˜¾ç¤º -->
        <view class="notes-tables-section" wx:if="{{item.relatedNotes || item.relatedTables}}">
          <!-- ç¬”è®°æ˜¾ç¤º -->
          <view class="notes-section" wx:if="{{item.relatedNotes}}">
            <view class="section-title">ğŸ“ ç›¸å…³ç¬”è®°</view>
            <view wx:for="{{item.relatedNotes}}" wx:for-item="noteId" wx:key="noteId" class="note-item">
              <view class="note-content" wx:if="{{notesData[noteId] && notesData[noteId].frontendName && notesData[noteId].content && notesData[noteId].content.trim() !== ''}}">
                <view class="note-title">{{notesData[noteId].frontendName}}</view>
                <view class="note-text">{{notesData[noteId].content}}</view>
              </view>
              <view class="note-content note-placeholder" wx:elif="{{notesData[noteId] && notesData[noteId].frontendName}}">
                <view class="note-title">{{notesData[noteId].frontendName}}</view>
                <view class="note-text note-loading">ç¬”è®°å†…å®¹åŠ è½½ä¸­...</view>
              </view>
            </view>
          </view>
          
          <!-- è¡¨æ ¼æ˜¾ç¤º -->
          <view class="tables-section" wx:if="{{item.relatedTables}}">
            <view class="section-title">ğŸ“Š ç›¸å…³è¡¨æ ¼</view>
            <view wx:for="{{item.relatedTables}}" wx:for-item="tableId" wx:key="tableId" class="table-item">
              <view class="table-content" wx:if="{{tablesData[tableId] && tablesData[tableId].frontendName && tablesData[tableId].content && tablesData[tableId].content.trim() !== ''}}">
                <view class="table-title">{{tablesData[tableId].frontendName}}</view>
                <view class="table-html">
                  <rich-text nodes="{{tablesData[tableId].content}}"></rich-text>
                </view>
              </view>
              <view class="table-content table-placeholder" wx:elif="{{tablesData[tableId] && tablesData[tableId].frontendName}}">
                <view class="table-title">{{tablesData[tableId].frontendName}}</view>
                <view class="table-html table-loading">è¡¨æ ¼å†…å®¹åŠ è½½ä¸­...</view>
              </view>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- è¡¨æ ¼ç»ƒä¹ ç•Œé¢ -->
  <view wx:if="{{exerciseType === 'writing'}}" class="table-exercise">
    <!-- noun_001ä¸“å±æ¸²æŸ“ï¼Œå·¦å®½å³çª„ -->
    <view wx:if="{{tableData['noun_001']}}" class="table-container">
      <view class="table-title-row">
        <view class="table-title">è¯·å†™å‡ºå·¦ä¾§å•è¯çš„åè¯åç¼€</view>
        <button class="noun-hint-btn" bindtap="showNounHint"><text class="noun-hint-icon">ğŸ’¡</text>æç¤º</button>
      </view>
      <view class="table-grid">
        <view wx:for="{{tableData['noun_001']}}" wx:for-item="cell" wx:for-index="idx" wx:key="cell_id">
          <block wx:if="{{cell.col === 1}}">
            <view class="table-row">
              <text class="table-cell left-cell">{{cell.question}}</text>
              <input class="table-input right-cell{{showCorrect['noun_001'][tableData['noun_001'][idx+1].cell_id] === true ? ' correct' : ''}}{{showCorrect['noun_001'][tableData['noun_001'][idx+1].cell_id] === false ? ' wrong' : ''}}"
                type="text"
                value="{{tableAnswers['noun_001'][tableData['noun_001'][idx+1].cell_id]}}"
                bindinput="onTableInput"
                data-table-id="noun_001"
                data-cell-id="{{tableData['noun_001'][idx+1].cell_id}}"
                placeholder="å¡«å†™åç¼€"
              />
            </view>
          </block>
        </view>
      </view>
    </view>

    <!-- noun_002ä¸“å±æ¸²æŸ“ï¼Œè¡¨æ ¼ç»“æ„ç‚¹å‡»é€‰æ‹© -->
    <view wx:if="{{tableData['noun_002']}}" class="table-container">
      <view class="table-title-row">
        <view class="table-title">ç‚¹å‡»ä»¥åè¯åç¼€ç»“å°¾çš„å•è¯(æ¯è¡Œåªæœ‰ä¸€ä¸ªæ­£ç¡®ç­”æ¡ˆ)</view>
        <button class="noun-hint-btn" bindtap="showNounHint"><text class="noun-hint-icon">ğŸ’¡</text>æç¤º</button>
      </view>
      <view class="table-grid noun002-grid">
        <block wx:for="{{16}}" wx:for-index="rowIdx" wx:key="rowIdx">
          <view class="table-row noun002-row{{rowStatus[rowIdx] === 'correct' ? ' row-correct' : ''}}{{rowStatus[rowIdx] === 'wrong' ? ' row-wrong' : ''}}">
            <block wx:for="{{[0,1,2,3]}}" wx:for-index="colIdx" wx:key="colIdx">
              <view wx:if="{{tableData['noun_002'][rowIdx*4+colIdx]}}"
                class="choice-option noun002-cell{{tableAnswers['noun_002'][tableData['noun_002'][rowIdx*4+colIdx].cell_id] === String.fromCharCode(65+colIdx) ? ' selected' : ''}}{{showCorrect['noun_002'][tableData['noun_002'][rowIdx*4+colIdx].cell_id] === true && tableAnswers['noun_002'][tableData['noun_002'][rowIdx*4+colIdx].cell_id] === String.fromCharCode(65+colIdx) ? ' correct' : ''}}{{showCorrect['noun_002'][tableData['noun_002'][rowIdx*4+colIdx].cell_id] === false && tableAnswers['noun_002'][tableData['noun_002'][rowIdx*4+colIdx].cell_id] === String.fromCharCode(65+colIdx) ? ' wrong' : ''}}"
                bindtap="onChoiceSelect"
                data-table-id="noun_002"
                data-cell-id="{{tableData['noun_002'][rowIdx*4+colIdx].cell_id}}"
                data-option="{{String.fromCharCode(65+colIdx)}}"
                data-word="{{tableData['noun_002'][rowIdx*4+colIdx].question}}">
                <text class="option-text noun002-text">{{tableData['noun_002'][rowIdx*4+colIdx].question}}</text>
              </view>
            </block>
          </view>
        </block>
      </view>
    </view>

    <!-- noun_003ä¸“å±æ¸²æŸ“ï¼Œ12è¡Œ4åˆ—ç‚¹å‡»é€‰æ‹© -->
    <view wx:if="{{tableData['noun_003']}}" class="table-container">
      <view class="table-title-row">
        <view class="table-title">ç‚¹å‡»æ‰€æœ‰å¸¦åè¯åç¼€çš„å•è¯</view>
        <button class="noun-hint-btn" bindtap="showNounHint"><text class="noun-hint-icon">ğŸ’¡</text>æç¤º</button>
      </view>
      <view class="table-grid noun003-grid">
        <block wx:for="{{12}}" wx:for-index="rowIdx" wx:key="rowIdx">
          <view class="table-row noun003-row">
            <block wx:for="{{[0,1,2,3]}}" wx:for-index="colIdx" wx:key="colIdx">
              <view wx:if="{{tableData['noun_003'][rowIdx*4+colIdx]}}"
                class="noun003-cell{{showCorrect['noun_003'][tableData['noun_003'][rowIdx*4+colIdx].cell_id] === true ? ' correct' : ''}}{{showCorrect['noun_003'][tableData['noun_003'][rowIdx*4+colIdx].cell_id] === false ? ' wrong' : ''}}"
                bindtap="onNoun003CellTap"
                data-table-id="noun_003"
                data-cell-id="{{tableData['noun_003'][rowIdx*4+colIdx].cell_id}}"
                data-word="{{tableData['noun_003'][rowIdx*4+colIdx].question}}">
                <text class="noun003-text">{{tableData['noun_003'][rowIdx*4+colIdx].question}}</text>
              </view>
            </block>
          </view>
        </block>
      </view>
    </view>

    <!-- noun_004ä¸“å±æ¸²æŸ“ï¼šè§„åˆ™å˜å¤æ•° -->
    <view wx:if="{{tableData['noun_004']}}" class="table-container">
      <view class="table-title-row">
        <view class="table-title">æ ¹æ®è§„åˆ™å¡«å†™å•è¯çš„å¤æ•°å½¢å¼</view>
        <!-- ä¸å†æ˜¾ç¤ºå…¨å±€æç¤ºæŒ‰é’® -->
      </view>
      <view class="table-grid noun004-grid">
        <block wx:for="{{[0,1,2,3,4]}}" wx:for-index="rowIdx" wx:key="rowIdx">
          <view class="table-row noun004-row">
            <!-- è§„åˆ™åˆ—ï¼Œç‚¹å‡»åˆ‡æ¢å…¨æ–‡ -->
            <view class="noun004-rule" bindtap="onNoun004RuleTap" data-row="{{rowIdx}}">
              <text class="lightbulb" style="color:{{noun004ShowFullRule[rowIdx] ? '#faad14' : '#ccc'}}">
                {{noun004ShowFullRule[rowIdx] ? 'ğŸ’¡' : 'ğŸ’¡'}}
              </text>
              <text>
                {{noun004ShowFullRule[rowIdx] ? tableData['noun_004'][rowIdx*5].rule.fullContent : tableData['noun_004'][rowIdx*5].rule.content}}
              </text>
            </view>
            <!-- 4ä¸ªè¾“å…¥æ¡† -->
            <block wx:for="{{[1,2,3,4]}}" wx:for-index="colIdx" wx:key="colIdx">
              <view class="noun004-cell">
                <input
                  class="noun004-input{{noun004InputStatus[rowIdx*5+colIdx+1] === 'correct' ? ' correct' : ''}}{{noun004InputStatus[rowIdx*5+colIdx+1] === 'wrong' ? ' wrong' : ''}}"
                  type="text"
                  value="{{tableAnswers['noun_004'][tableData['noun_004'][rowIdx*5+colIdx+1].cell_id]}}"
                  bindinput="onNoun004Input"
                  data-table-id="noun_004"
                  data-cell-id="{{tableData['noun_004'][rowIdx*5+colIdx+1].cell_id}}"
                  data-row="{{rowIdx}}"
                  data-col="{{colIdx+1}}"
                  placeholder="{{tableData['noun_004'][rowIdx*5+colIdx+1].hintWord}}"
                  style="color:{{!tableAnswers['noun_004'][tableData['noun_004'][rowIdx*5+colIdx+1].cell_id] ? '#bbb' : (noun004InputStatus[rowIdx*5+colIdx+1] === 'correct' ? 'green' : (noun004InputStatus[rowIdx*5+colIdx+1] === 'wrong' ? 'red' : '#333'))}}"
                />
              </view>
            </block>
          </view>
        </block>
      </view>
    </view>



    <!-- ä»£è¯è¡¨æ ¼ä¸“å±æ¸²æŸ“ -->
    <view wx:if="{{tableData['pronoun_001']}}" class="table-container">
      <view class="table-title">pronoun_001 - ä»£è¯ç»ƒä¹ è¡¨æ ¼(é¡ºåº)</view>
      
      <!-- è¡¨å¤´ -->
      <view class="pronoun-table-header">
        <view class="pronoun-header-cell">äººç§°</view>
        <view class="pronoun-header-cell">ä¸»æ ¼</view>
        <view class="pronoun-header-cell">å®¾æ ¼</view>
        <view class="pronoun-header-cell">å½¢å®¹è¯æ€§ç‰©ä¸»ä»£è¯</view>
        <view class="pronoun-header-cell">åè¯æ€§ç‰©ä¸»ä»£è¯</view>
        <view class="pronoun-header-cell">åèº«ä»£è¯</view>
      </view>
      
      <!-- è¡¨æ ¼å†…å®¹ -->
      <view wx:for="{{[0,1,2,3,4,5,6,7]}}" wx:key="index" class="pronoun-table-row" wx:for-item="rowIdx">
        <view wx:for="{{[0,1,2,3,4,5]}}" wx:key="index" class="pronoun-table-cell" wx:for-item="colIdx">
          <view wx:if="{{colIdx === 0}}" class="pronoun-label">
            {{tableData['pronoun_001'][rowIdx*6+colIdx].answer}}
          </view>
          <input wx:else 
                 class="pronoun-input{{pronounInputStatus['pronoun_001_' + rowIdx + '_' + colIdx] === 'correct' ? ' correct' : ''}}{{pronounInputStatus['pronoun_001_' + rowIdx + '_' + colIdx] === 'wrong' ? ' wrong' : ''}}"
                 type="text"
                 placeholder=""
                 value="{{pronounUserInputs['pronoun_001_' + rowIdx + '_' + colIdx] || ''}}"
                 bindinput="onPronounInput"
                 data-table="pronoun_001"
                 data-row="{{rowIdx}}"
                 data-col="{{colIdx}}" />
        </view>
      </view>
      
      <view class="action-buttons">
        <button class="action-btn hint-btn" bindtap="showHintOptions">
          <text class="btn-icon">ğŸ’¡</text>
          <text class="btn-text">å°å°çš„æç¤º</text>
        </button>
        <button class="action-btn answer-btn" bindtap="showFullAnswer" data-table-id="pronoun_001">
          <text class="btn-icon">ğŸ“š</text>
          <text class="btn-text">æˆ‘å†è®°ä¼šå„¿</text>
        </button>
      </view>
    </view>

    <view wx:if="{{tableData['pronoun_002']}}" class="table-container">
      <view class="table-title">pronoun_002 - ä»£è¯ç»ƒä¹ è¡¨æ ¼(ä¹±åº)</view>
      
      <!-- è¡¨å¤´ -->
      <view class="pronoun-table-header">
        <view class="pronoun-header-cell">äººç§°</view>
        <view class="pronoun-header-cell">ä¸»æ ¼</view>
        <view class="pronoun-header-cell">å®¾æ ¼</view>
        <view class="pronoun-header-cell">å½¢å®¹è¯æ€§ç‰©ä¸»ä»£è¯</view>
        <view class="pronoun-header-cell">åè¯æ€§ç‰©ä¸»ä»£è¯</view>
        <view class="pronoun-header-cell">åèº«ä»£è¯</view>
      </view>
      
      <!-- è¡¨æ ¼å†…å®¹ -->
      <view wx:for="{{[0,1,2,3,4,5,6,7]}}" wx:key="index" class="pronoun-table-row" wx:for-item="rowIdx">
        <view wx:for="{{[0,1,2,3,4,5]}}" wx:key="index" class="pronoun-table-cell" wx:for-item="colIdx">
          <view wx:if="{{colIdx === 0}}" class="pronoun-label">
            {{tableData['pronoun_002'][rowIdx*6+colIdx].answer}}
          </view>
          <input wx:else 
                 class="pronoun-input{{pronounInputStatus['pronoun_002_' + rowIdx + '_' + colIdx] === 'correct' ? ' correct' : ''}}{{pronounInputStatus['pronoun_002_' + rowIdx + '_' + colIdx] === 'wrong' ? ' wrong' : ''}}"
                 type="text"
                 placeholder=""
                 value="{{pronounUserInputs['pronoun_002_' + rowIdx + '_' + colIdx] || ''}}"
                 bindinput="onPronounInput"
                 data-table="pronoun_002"
                 data-row="{{rowIdx}}"
                 data-col="{{colIdx}}" />
        </view>
      </view>
      
      <view class="action-buttons">
        <button class="action-btn hint-btn" bindtap="showHintOptions">
          <text class="btn-icon">ğŸ’¡</text>
          <text class="btn-text">å°å°çš„æç¤º</text>
        </button>
        <button class="action-btn answer-btn" bindtap="showFullAnswer" data-table-id="pronoun_002">
          <text class="btn-icon">ğŸ“š</text>
          <text class="btn-text">æˆ‘å†è®°ä¼šå„¿</text>
        </button>
      </view>
    </view>

    <!-- ç°åœ¨åˆ†è¯è¡¨æ ¼ä¸“å±æ¸²æŸ“ -->
    <view wx:if="{{tableData['present_participle_001']}}" class="table-container">
      <view class="table-title-row">
        <view class="table-title">è¯·å†™å‡ºæ ¼å­å†…å•è¯çš„ç°åœ¨åˆ†è¯å½¢å¼</view>
      </view>
      <view class="table-grid present-participle-grid">
        <block wx:for="{{[0,1,2,3,4]}}" wx:for-index="rowIdx" wx:key="rowIdx">
          <view class="table-row present-participle-row">
            <!-- è§„åˆ™åˆ—ï¼Œç‚¹å‡»åˆ‡æ¢å…¨æ–‡ -->
            <view class="present-participle-rule" bindtap="onPresentParticipleRuleTap" data-row="{{rowIdx}}">
              <text class="lightbulb" style="color:{{presentParticipleShowFullRule[rowIdx] ? '#52c41a' : '#ccc'}}">
                ğŸ’¡
              </text>
              <text>
                {{presentParticipleShowFullRule[rowIdx] ? tableData['present_participle_001'][rowIdx*5].fullRule : tableData['present_participle_001'][rowIdx*5].rule}}
              </text>
            </view>
            <!-- 4ä¸ªè¾“å…¥æ¡† -->
            <block wx:for="{{[1,2,3,4]}}" wx:for-index="colIdx" wx:key="colIdx">
              <view class="present-participle-cell">
                <input
                  class="present-participle-input{{presentParticipleInputStatus[rowIdx*5+colIdx+1] === 'correct' ? ' correct' : ''}}{{presentParticipleInputStatus[rowIdx*5+colIdx+1] === 'wrong' ? ' wrong' : ''}}"
                  type="text"
                  value="{{tableAnswers['present_participle_001'][tableData['present_participle_001'][rowIdx*5+colIdx+1].cell_id]}}"
                  bindinput="onPresentParticipleInput"
                  data-table-id="present_participle_001"
                  data-cell-id="{{tableData['present_participle_001'][rowIdx*5+colIdx+1].cell_id}}"
                  data-row="{{rowIdx}}"
                  data-col="{{colIdx+1}}"
                  placeholder="{{tableData['present_participle_001'][rowIdx*5+colIdx+1].hintWord}}"
                  style="color:{{!tableAnswers['present_participle_001'][tableData['present_participle_001'][rowIdx*5+colIdx+1].cell_id] ? '#bbb' : (presentParticipleInputStatus[rowIdx*5+colIdx+1] === 'correct' ? 'green' : (presentParticipleInputStatus[rowIdx*5+colIdx+1] === 'wrong' ? 'red' : '#333'))}}"
                />
              </view>
            </block>
          </view>
        </block>
      </view>
    </view>

    <!-- è¿‡å»åˆ†è¯è¡¨æ ¼ä¸“å±æ¸²æŸ“ -->
    <view wx:if="{{tableData['past_participle_001']}}" class="table-container">
      <view class="table-title-row">
        <view class="table-title">è¯·å†™å‡ºæ ¼å­å†…å•è¯çš„è¿‡å»åˆ†è¯å½¢å¼</view>
      </view>
      <view class="table-grid past-participle-grid">
        <block wx:for="{{[0,1,2,3,4]}}" wx:for-index="rowIdx" wx:key="rowIdx">
          <view class="table-row past-participle-row">
            <!-- è§„åˆ™åˆ—ï¼Œç‚¹å‡»åˆ‡æ¢å…¨æ–‡ -->
            <view class="past-participle-rule" bindtap="onPastParticipleRuleTap" data-row="{{rowIdx}}">
              <text class="lightbulb" style="color:{{pastParticipleShowFullRule[rowIdx] ? '#fa8c16' : '#ccc'}}">
                ğŸ’¡
              </text>
              <text>
                {{pastParticipleShowFullRule[rowIdx] ? tableData['past_participle_001'][rowIdx*5].fullRule : tableData['past_participle_001'][rowIdx*5].rule}}
              </text>
            </view>
            <!-- 4ä¸ªè¾“å…¥æ¡† -->
            <block wx:for="{{[1,2,3,4]}}" wx:for-index="colIdx" wx:key="colIdx">
              <view class="past-participle-cell">
                <input
                  class="past-participle-input{{pastParticipleInputStatus[rowIdx*5+colIdx+1] === 'correct' ? ' correct' : ''}}{{pastParticipleInputStatus[rowIdx*5+colIdx+1] === 'wrong' ? ' wrong' : ''}}"
                  type="text"
                  value="{{tableAnswers['past_participle_001'][tableData['past_participle_001'][rowIdx*5+colIdx+1].cell_id]}}"
                  bindinput="onPastParticipleInput"
                  data-table-id="past_participle_001"
                  data-cell-id="{{tableData['past_participle_001'][rowIdx*5+colIdx+1].cell_id}}"
                  data-row="{{rowIdx}}"
                  data-col="{{colIdx+1}}"
                  placeholder="{{tableData['past_participle_001'][rowIdx*5+colIdx+1].hintWord}}"
                  style="color:{{!tableAnswers['past_participle_001'][tableData['past_participle_001'][rowIdx*5+colIdx+1].cell_id] ? '#bbb' : (pastParticipleInputStatus[rowIdx*5+colIdx+1] === 'correct' ? 'green' : (pastParticipleInputStatus[rowIdx*5+colIdx+1] === 'wrong' ? 'red' : '#333'))}}"
                />
              </view>
            </block>
          </view>
        </block>
      </view>
    </view>

    <!-- æ—¶æ€ä¹¦å†™è¡¨æ ¼ä¸“å±æ¸²æŸ“ -->
    <view wx:if="{{tableData['tense_writing_001']}}" class="table-container">
      <view class="table-title-row">
        <view class="table-title">è¯·å†™å‡ºä¸åŒæ—¶æ€ä¸‹çš„åŠ¨è¯å½¢å¼</view>
        <button class="signal-card-btn" bindtap="navigateToTenseSignalCards">
          <text class="signal-card-icon">ğŸ“š</text>
          <text class="signal-card-text">æ ‡å¿—è¯å›é¡¾å¡</text>
        </button>
      </view>
      <view class="table-grid tense-writing-grid">
        <!-- è¡¨å¤´è¡Œ -->
        <view class="table-row tense-header-row">
          <view class="tense-header-cell">æ—¶æ€</view>
          <view class="tense-header-cell">do</view>
          <view class="tense-header-cell">work</view>
          <view class="tense-header-cell">play</view>
          <view class="tense-header-cell">study</view>
        </view>
        <!-- 8è¡Œæ—¶æ€æ•°æ® -->
        <block wx:for="{{[0,1,2,3,4,5,6,7]}}" wx:for-index="rowIdx" wx:key="rowIdx">
          <view class="table-row tense-writing-row">
            <!-- æ—¶æ€åç§°åˆ—ï¼Œç‚¹å‡»åˆ‡æ¢å…¨æ–‡ -->
            <view class="tense-writing-rule" bindtap="onTenseWritingRuleTap" data-row="{{rowIdx}}">
              <text class="lightbulb" style="color:{{tenseWritingShowFullRule[rowIdx] ? '#1890ff' : '#ccc'}}">
                ğŸ’¡
              </text>
              <text>
                {{tenseWritingShowFullRule[rowIdx] ? tableData['tense_writing_001'][(rowIdx+1)*5].rule : tableData['tense_writing_001'][(rowIdx+1)*5].content}}
              </text>
            </view>
            <!-- 4ä¸ªè¾“å…¥æ¡† -->
            <block wx:for="{{[1,2,3,4]}}" wx:for-index="colIdx" wx:key="colIdx">
              <view class="tense-writing-cell">
                <input
                  class="tense-writing-input{{tenseWritingInputStatus[(rowIdx+1)*5+colIdx+1] === 'correct' ? ' correct' : ''}}{{tenseWritingInputStatus[(rowIdx+1)*5+colIdx+1] === 'wrong' ? ' wrong' : ''}}"
                  type="text"
                  value="{{tableAnswers['tense_writing_001'][tableData['tense_writing_001'][(rowIdx+1)*5+colIdx+1].cell_id]}}"
                  bindinput="onTenseWritingInput"
                  data-table-id="tense_writing_001"
                  data-cell-id="{{tableData['tense_writing_001'][(rowIdx+1)*5+colIdx+1].cell_id}}"
                  data-row="{{rowIdx+1}}"
                  data-col="{{colIdx+1}}"
                  placeholder="{{tableData['tense_writing_001'][(rowIdx+1)*5+colIdx+1].hintWord}}"
                  style="color:{{!tableAnswers['tense_writing_001'][tableData['tense_writing_001'][(rowIdx+1)*5+colIdx+1].cell_id] ? '#bbb' : (tenseWritingInputStatus[(rowIdx+1)*5+colIdx+1] === 'correct' ? 'green' : (tenseWritingInputStatus[(rowIdx+1)*5+colIdx+1] === 'wrong' ? 'red' : '#333'))}}"
                />
              </view>
            </block>
          </view>
        </block>
      </view>
    </view>



    <!-- å½¢å®¹è¯å‰åç¼€è¯†åˆ«è¡¨æ ¼ä¸“å±æ¸²æŸ“ -->
    <view wx:if="{{tableData['comparison_prefix_suffix_001']}}" class="table-container">
      <view class="table-title-row">
        <view class="table-title">è¯·è¯†åˆ«å½¢å®¹è¯çš„å‰åç¼€</view>
      </view>
      <view class="table-grid prefix-suffix-grid">
        <block wx:for="{{[0,1,2,3,4,5,6,7,8,9]}}" wx:for-index="rowIdx" wx:key="rowIdx">
          <view class="table-row prefix-suffix-row">
            <!-- ç¤ºä¾‹å•è¯åˆ— -->
            <view class="prefix-suffix-examples">
              <text>{{tableData['comparison_prefix_suffix_001'][rowIdx*2].question}}</text>
            </view>
            <!-- è¾“å…¥æ¡†åˆ— -->
            <view class="prefix-suffix-cell">
              <input
                class="prefix-suffix-input{{prefixSuffixInputStatus[rowIdx] === 'correct' ? ' correct' : ''}}{{prefixSuffixInputStatus[rowIdx] === 'wrong' ? ' wrong' : ''}}"
                type="text"
                value="{{tableAnswers['comparison_prefix_suffix_001'][tableData['comparison_prefix_suffix_001'][rowIdx*2+1].cell_id]}}"
                bindinput="onPrefixSuffixInput"
                data-table-id="comparison_prefix_suffix_001"
                data-cell-id="{{tableData['comparison_prefix_suffix_001'][rowIdx*2+1].cell_id}}"
                data-row="{{rowIdx}}"
                placeholder="{{tableData['comparison_prefix_suffix_001'][rowIdx*2+1].question}}"
                style="color:{{!tableAnswers['comparison_prefix_suffix_001'][tableData['comparison_prefix_suffix_001'][rowIdx*2+1].cell_id] ? '#bbb' : (prefixSuffixInputStatus[rowIdx] === 'correct' ? 'green' : (prefixSuffixInputStatus[rowIdx] === 'wrong' ? 'red' : '#333'))}}"
              />
            </view>
          </view>
        </block>
      </view>
    </view>

    <!-- æ¯”è¾ƒçº§ä¹¦å†™è¡¨æ ¼ä¸“å±æ¸²æŸ“ -->
    <view wx:if="{{tableData['comparison_comparative_001']}}" class="table-container">
      <view class="table-title-row">
        <view class="table-title">è¯·å†™å‡ºæ ¼å­å†…å•è¯çš„æ¯”è¾ƒçº§å½¢å¼</view>
      </view>
      <view class="table-grid comparative-grid">
        <block wx:for="{{[0,1,2,3,4]}}" wx:for-index="rowIdx" wx:key="rowIdx">
          <view class="table-row comparative-row">
            <!-- è§„åˆ™åˆ—ï¼Œç‚¹å‡»åˆ‡æ¢å…¨æ–‡ -->
            <view class="comparative-rule" bindtap="onComparativeRuleTap" data-row="{{rowIdx}}">
              <text class="lightbulb" style="color:{{comparativeShowFullRule[rowIdx] ? '#eb2f96' : '#ccc'}}">
                ğŸ’¡
              </text>
              <text>
                {{comparativeShowFullRule[rowIdx] ? tableData['comparison_comparative_001'][rowIdx*5].rule.fullContent : tableData['comparison_comparative_001'][rowIdx*5].rule.content}}
              </text>
            </view>
            <!-- 4ä¸ªè¾“å…¥æ¡† -->
            <block wx:for="{{[1,2,3,4]}}" wx:for-index="colIdx" wx:key="colIdx">
              <view class="comparative-cell">
                <input
                  class="comparative-input{{comparativeInputStatus[tableData['comparison_comparative_001'][rowIdx*5+colIdx+1].cell_id] === 'correct' ? ' correct' : ''}}{{comparativeInputStatus[tableData['comparison_comparative_001'][rowIdx*5+colIdx+1].cell_id] === 'wrong' ? ' wrong' : ''}}"
                  type="text"
                  value="{{tableAnswers['comparison_comparative_001'][tableData['comparison_comparative_001'][rowIdx*5+colIdx+1].cell_id]}}"
                  bindinput="onComparativeInput"
                  data-table-id="comparison_comparative_001"
                  data-cell-id="{{tableData['comparison_comparative_001'][rowIdx*5+colIdx+1].cell_id}}"
                  data-row="{{rowIdx}}"
                  data-col="{{colIdx+1}}"
                  placeholder="{{tableData['comparison_comparative_001'][rowIdx*5+colIdx+1].hintWord}}"
                  style="color:{{!tableAnswers['comparison_comparative_001'][tableData['comparison_comparative_001'][rowIdx*5+colIdx+1].cell_id] ? '#bbb' : (comparativeInputStatus[tableData['comparison_comparative_001'][rowIdx*5+colIdx+1].cell_id] === 'correct' ? 'green' : (comparativeInputStatus[tableData['comparison_comparative_001'][rowIdx*5+colIdx+1].cell_id] === 'wrong' ? 'red' : '#333'))}}"
                />
              </view>
            </block>
          </view>
        </block>
      </view>
    </view>

    <!-- æœ€é«˜çº§ä¹¦å†™è¡¨æ ¼ä¸“å±æ¸²æŸ“ -->
    <view wx:if="{{tableData['comparison_superlative_001']}}" class="table-container">
      <view class="table-title-row">
        <view class="table-title">è¯·å†™å‡ºæ ¼å­å†…å•è¯çš„æœ€é«˜çº§å½¢å¼</view>
      </view>
      <view class="table-grid superlative-grid">
        <block wx:for="{{[0,1,2,3,4]}}" wx:for-index="rowIdx" wx:key="rowIdx">
          <view class="table-row superlative-row">
            <!-- è§„åˆ™åˆ—ï¼Œç‚¹å‡»åˆ‡æ¢å…¨æ–‡ -->
            <view class="superlative-rule" bindtap="onSuperlativeRuleTap" data-row="{{rowIdx}}">
              <text class="lightbulb" style="color:{{superlativeShowFullRule[rowIdx] ? '#eb2f96' : '#ccc'}}">
                ğŸ’¡
              </text>
              <text>
                {{superlativeShowFullRule[rowIdx] ? tableData['comparison_superlative_001'][rowIdx*5].rule.fullContent : tableData['comparison_superlative_001'][rowIdx*5].rule.content}}
              </text>
            </view>
            <!-- 4ä¸ªè¾“å…¥æ¡† -->
            <block wx:for="{{[1,2,3,4]}}" wx:for-index="colIdx" wx:key="colIdx">
              <view class="superlative-cell">
                <input
                  class="superlative-input{{superlativeInputStatus[tableData['comparison_superlative_001'][rowIdx*5+colIdx+1].cell_id] === 'correct' ? ' correct' : ''}}{{superlativeInputStatus[tableData['comparison_superlative_001'][rowIdx*5+colIdx+1].cell_id] === 'wrong' ? ' wrong' : ''}}"
                  type="text"
                  value="{{tableAnswers['comparison_superlative_001'][tableData['comparison_superlative_001'][rowIdx*5+colIdx+1].cell_id]}}"
                  bindinput="onSuperlativeInput"
                  data-table-id="comparison_superlative_001"
                  data-cell-id="{{tableData['comparison_superlative_001'][rowIdx*5+colIdx+1].cell_id}}"
                  data-row="{{rowIdx}}"
                  data-col="{{colIdx+1}}"
                  placeholder="{{tableData['comparison_superlative_001'][rowIdx*5+colIdx+1].hintWord}}"
                  style="color:{{!tableAnswers['comparison_superlative_001'][tableData['comparison_superlative_001'][rowIdx*5+colIdx+1].cell_id] ? '#bbb' : (superlativeInputStatus[tableData['comparison_superlative_001'][rowIdx*5+colIdx+1].cell_id] === 'correct' ? 'green' : (superlativeInputStatus[tableData['comparison_superlative_001'][rowIdx*5+colIdx+1].cell_id] === 'wrong' ? 'red' : '#333'))}}"
                />
              </view>
            </block>
          </view>
        </block>
      </view>
    </view>

    <!-- å‰¯è¯ä¹¦å†™è¡¨æ ¼ä¸“å±æ¸²æŸ“ -->
    <view wx:if="{{tableData['adverb_writing_001']}}" class="table-container">
      <view class="table-title-row">
        <view class="table-title">è¯·å†™å‡ºæ ¼å­å†…å½¢å®¹è¯çš„å‰¯è¯å½¢å¼</view>
      </view>
      <view class="table-grid adverb-grid">
        <block wx:for="{{[0,1,2,3,4,5]}}" wx:for-index="rowIdx" wx:key="rowIdx">
          <view class="table-row adverb-row">
            <!-- è§„åˆ™åˆ—ï¼Œç‚¹å‡»åˆ‡æ¢å…¨æ–‡ -->
            <view class="adverb-rule" bindtap="onAdverbRuleTap" data-row="{{rowIdx}}">
              <text class="lightbulb" style="color:{{adverbShowFullRule[rowIdx] ? '#10b981' : '#ccc'}}">
                ğŸ’¡
              </text>
              <text>
                {{adverbShowFullRule[rowIdx] ? tableData['adverb_writing_001'][rowIdx*5].rule.fullContent : tableData['adverb_writing_001'][rowIdx*5].rule.content}}
              </text>
            </view>
            <!-- 4ä¸ªè¾“å…¥æ¡† -->
            <block wx:for="{{[1,2,3,4]}}" wx:for-index="colIdx" wx:key="colIdx">
              <view class="adverb-cell">
                <input
                  class="adverb-input{{adverbInputStatus[tableData['adverb_writing_001'][rowIdx*5+colIdx+1].cell_id] === 'correct' ? ' correct' : ''}}{{adverbInputStatus[tableData['adverb_writing_001'][rowIdx*5+colIdx+1].cell_id] === 'wrong' ? ' wrong' : ''}}"
                  type="text"
                  value="{{tableAnswers['adverb_writing_001'][tableData['adverb_writing_001'][rowIdx*5+colIdx+1].cell_id]}}"
                  bindinput="onAdverbInput"
                  data-table-id="adverb_writing_001"
                  data-cell-id="{{tableData['adverb_writing_001'][rowIdx*5+colIdx+1].cell_id}}"
                  data-row="{{rowIdx}}"
                  data-col="{{colIdx+1}}"
                  placeholder="{{tableData['adverb_writing_001'][rowIdx*5+colIdx+1].hintWord}}"
                  style="color:{{!tableAnswers['adverb_writing_001'][tableData['adverb_writing_001'][rowIdx*5+colIdx+1].cell_id] ? '#bbb' : (adverbInputStatus[tableData['adverb_writing_001'][rowIdx*5+colIdx+1].cell_id] === 'correct' ? 'green' : (adverbInputStatus[tableData['adverb_writing_001'][rowIdx*5+colIdx+1].cell_id] === 'wrong' ? 'red' : '#333'))}}"
                />
              </view>
            </block>
          </view>
        </block>
      </view>
    </view>

    <!-- è¯­æ€å¡«è¡¨ç»ƒä¹ ä¸“å±æ¸²æŸ“(ä¸€èˆ¬ç°åœ¨æ—¶) -->
    <view wx:if="{{tableData['voice_writing_001']}}" class="table-container">
      <view class="table-title-row">
        <view class="table-title">è¯·å¡«å†™è¯­æ€è¡¨æ ¼(ä¸€èˆ¬ç°åœ¨æ—¶)</view>
      </view>
      <!-- è§„åˆ™è¯´æ˜ -->
      <view class="rules-section" wx:if="{{questionsData && questionsData['voice_writing_001'] && questionsData['voice_writing_001'].rules}}">
        <view class="rules-content">
          <text class="rules-icon">ğŸ“</text>
          <text class="rules-text">{{questionsData['voice_writing_001'].rules}}</text>
        </view>
      </view>
      <view class="table-grid voice-writing-grid">
        <!-- è¡¨å¤´è¡Œ -->
        <view class="table-row voice-header-row">
          <view class="voice-header-cell">{{tableData['voice_writing_001'][0].question}}</view>
          <view class="voice-header-cell">{{tableData['voice_writing_001'][1].question}}</view>
          <view class="voice-header-cell">{{tableData['voice_writing_001'][2].question}}</view>
        </view>
        <!-- 10è¡Œæ•°æ® -->
        <block wx:for="{{[0,1,2,3,4,5,6,7,8,9]}}" wx:for-index="rowIdx" wx:key="rowIdx">
          <view class="table-row voice-writing-row">
            <!-- å•è¯(åŸå½¢)åˆ— -->
            <view class="voice-writing-cell">
              <text class="voice-word">{{tableData['voice_writing_001'][(rowIdx+1)*3].question}}</text>
            </view>
            <!-- ä¸€èˆ¬ç°åœ¨æ—¶å†™æ³•è¾“å…¥æ¡† -->
            <view class="voice-writing-cell">
              <input
                class="voice-writing-input{{showCorrect['voice_writing_001'][tableData['voice_writing_001'][(rowIdx+1)*3+1].cell_id] === true ? ' correct' : ''}}{{showCorrect['voice_writing_001'][tableData['voice_writing_001'][(rowIdx+1)*3+1].cell_id] === false ? ' wrong' : ''}}"
                type="text"
                value="{{tableAnswers['voice_writing_001'][tableData['voice_writing_001'][(rowIdx+1)*3+1].cell_id]}}"
                bindinput="onTableInput"
                data-table-id="voice_writing_001"
                data-cell-id="{{tableData['voice_writing_001'][(rowIdx+1)*3+1].cell_id}}"
                placeholder="{{tableData['voice_writing_001'][(rowIdx+1)*3+1].hintWord}}"
                style="color:{{!tableAnswers['voice_writing_001'][tableData['voice_writing_001'][(rowIdx+1)*3+1].cell_id] ? '#bbb' : (showCorrect['voice_writing_001'][tableData['voice_writing_001'][(rowIdx+1)*3+1].cell_id] === true ? 'green' : (showCorrect['voice_writing_001'][tableData['voice_writing_001'][(rowIdx+1)*3+1].cell_id] === false ? 'red' : '#333'))}}"
              />
            </view>
            <!-- ä¸€èˆ¬ç°åœ¨æ—¶è¢«åŠ¨å†™æ³•è¾“å…¥æ¡† -->
            <view class="voice-writing-cell">
              <input
                class="voice-writing-input{{showCorrect['voice_writing_001'][tableData['voice_writing_001'][(rowIdx+1)*3+2].cell_id] === true ? ' correct' : ''}}{{showCorrect['voice_writing_001'][tableData['voice_writing_001'][(rowIdx+1)*3+2].cell_id] === false ? ' wrong' : ''}}"
                type="text"
                value="{{tableAnswers['voice_writing_001'][tableData['voice_writing_001'][(rowIdx+1)*3+2].cell_id]}}"
                bindinput="onTableInput"
                data-table-id="voice_writing_001"
                data-cell-id="{{tableData['voice_writing_001'][(rowIdx+1)*3+2].cell_id}}"
                placeholder="{{tableData['voice_writing_001'][(rowIdx+1)*3+2].hintWord}}"
                style="color:{{!tableAnswers['voice_writing_001'][tableData['voice_writing_001'][(rowIdx+1)*3+2].cell_id] ? '#bbb' : (showCorrect['voice_writing_001'][tableData['voice_writing_001'][(rowIdx+1)*3+2].cell_id] === true ? 'green' : (showCorrect['voice_writing_001'][tableData['voice_writing_001'][(rowIdx+1)*3+2].cell_id] === false ? 'red' : '#333'))}}"
              />
            </view>
          </view>
        </block>
      </view>
    </view>

    <!-- è¯­æ€å¡«è¡¨ç»ƒä¹ ä¸“å±æ¸²æŸ“(ä¸€èˆ¬è¿‡å»æ—¶) -->
    <view wx:if="{{tableData['voice_writing_002']}}" class="table-container">
      <view class="table-title-row">
        <view class="table-title">è¯·å¡«å†™è¯­æ€è¡¨æ ¼(ä¸€èˆ¬è¿‡å»æ—¶)</view>
      </view>
      <!-- è§„åˆ™è¯´æ˜ -->
      <view class="rules-section" wx:if="{{questionsData && questionsData['voice_writing_002'] && questionsData['voice_writing_002'].rules}}">
        <view class="rules-content">
          <text class="rules-icon">ğŸ“</text>
          <text class="rules-text">{{questionsData['voice_writing_002'].rules}}</text>
        </view>
      </view>
      <view class="table-grid voice-writing-grid">
        <!-- è¡¨å¤´è¡Œ -->
        <view class="table-row voice-header-row">
          <view class="voice-header-cell">{{tableData['voice_writing_002'][0].question}}</view>
          <view class="voice-header-cell">{{tableData['voice_writing_002'][1].question}}</view>
          <view class="voice-header-cell">{{tableData['voice_writing_002'][2].question}}</view>
        </view>
        <!-- 10è¡Œæ•°æ® -->
        <block wx:for="{{[0,1,2,3,4,5,6,7,8,9]}}" wx:for-index="rowIdx" wx:key="rowIdx">
          <view class="table-row voice-writing-row">
            <!-- å•è¯(åŸå½¢)åˆ— -->
            <view class="voice-writing-cell">
              <text class="voice-word">{{tableData['voice_writing_002'][(rowIdx+1)*3].question}}</text>
            </view>
            <!-- ä¸€èˆ¬è¿‡å»æ—¶å†™æ³•è¾“å…¥æ¡† -->
            <view class="voice-writing-cell">
              <input
                class="voice-writing-input{{showCorrect['voice_writing_002'][tableData['voice_writing_002'][(rowIdx+1)*3+1].cell_id] === true ? ' correct' : ''}}{{showCorrect['voice_writing_002'][tableData['voice_writing_002'][(rowIdx+1)*3+1].cell_id] === false ? ' wrong' : ''}}"
                type="text"
                value="{{tableAnswers['voice_writing_002'][tableData['voice_writing_002'][(rowIdx+1)*3+1].cell_id]}}"
                bindinput="onTableInput"
                data-table-id="voice_writing_002"
                data-cell-id="{{tableData['voice_writing_002'][(rowIdx+1)*3+1].cell_id}}"
                placeholder="{{tableData['voice_writing_002'][(rowIdx+1)*3+1].hintWord}}"
                style="color:{{!tableAnswers['voice_writing_002'][tableData['voice_writing_002'][(rowIdx+1)*3+1].cell_id] ? '#bbb' : (showCorrect['voice_writing_002'][tableData['voice_writing_002'][(rowIdx+1)*3+1].cell_id] === true ? 'green' : (showCorrect['voice_writing_002'][tableData['voice_writing_002'][(rowIdx+1)*3+1].cell_id] === false ? 'red' : '#333'))}}"
              />
            </view>
            <!-- ä¸€èˆ¬è¿‡å»æ—¶è¢«åŠ¨å†™æ³•è¾“å…¥æ¡† -->
            <view class="voice-writing-cell">
              <input
                class="voice-writing-input{{showCorrect['voice_writing_002'][tableData['voice_writing_002'][(rowIdx+1)*3+2].cell_id] === true ? ' correct' : ''}}{{showCorrect['voice_writing_002'][tableData['voice_writing_002'][(rowIdx+1)*3+2].cell_id] === false ? ' wrong' : ''}}"
                type="text"
                value="{{tableAnswers['voice_writing_002'][tableData['voice_writing_002'][(rowIdx+1)*3+2].cell_id]}}"
                bindinput="onTableInput"
                data-table-id="voice_writing_002"
                data-cell-id="{{tableData['voice_writing_002'][(rowIdx+1)*3+2].cell_id}}"
                placeholder="{{tableData['voice_writing_002'][(rowIdx+1)*3+2].hintWord}}"
                style="color:{{!tableAnswers['voice_writing_002'][tableData['voice_writing_002'][(rowIdx+1)*3+2].cell_id] ? '#bbb' : (showCorrect['voice_writing_002'][tableData['voice_writing_002'][(rowIdx+1)*3+2].cell_id] === true ? 'green' : (showCorrect['voice_writing_002'][tableData['voice_writing_002'][(rowIdx+1)*3+2].cell_id] === false ? 'red' : '#333'))}}"
              />
            </view>
          </view>
        </block>
      </view>
    </view>

    <!-- è¯­æ€å¡«è¡¨ç»ƒä¹ ä¸“å±æ¸²æŸ“(ä¸€èˆ¬å°†æ¥æ—¶) -->
    <view wx:if="{{tableData['voice_writing_003']}}" class="table-container">
      <view class="table-title-row">
        <view class="table-title">è¯·å¡«å†™è¯­æ€è¡¨æ ¼(ä¸€èˆ¬å°†æ¥æ—¶)</view>
      </view>
      <!-- è§„åˆ™è¯´æ˜ -->
      <view class="rules-section" wx:if="{{questionsData && questionsData['voice_writing_003'] && questionsData['voice_writing_003'].rules}}">
        <view class="rules-content">
          <text class="rules-icon">ğŸ“</text>
          <text class="rules-text">{{questionsData['voice_writing_003'].rules}}</text>
        </view>
      </view>
      <view class="table-grid voice-writing-grid">
        <!-- è¡¨å¤´è¡Œ -->
        <view class="table-row voice-header-row">
          <view class="voice-header-cell">{{tableData['voice_writing_003'][0].question}}</view>
          <view class="voice-header-cell">{{tableData['voice_writing_003'][1].question}}</view>
          <view class="voice-header-cell">{{tableData['voice_writing_003'][2].question}}</view>
        </view>
        <!-- 10è¡Œæ•°æ® -->
        <block wx:for="{{[0,1,2,3,4,5,6,7,8,9]}}" wx:for-index="rowIdx" wx:key="rowIdx">
          <view class="table-row voice-writing-row">
            <!-- å•è¯(åŸå½¢)åˆ— -->
            <view class="voice-writing-cell">
              <text class="voice-word">{{tableData['voice_writing_003'][(rowIdx+1)*3].question}}</text>
            </view>
            <!-- ä¸€èˆ¬å°†æ¥æ—¶å†™æ³•è¾“å…¥æ¡† -->
            <view class="voice-writing-cell">
              <input
                class="voice-writing-input{{showCorrect['voice_writing_003'][tableData['voice_writing_003'][(rowIdx+1)*3+1].cell_id] === true ? ' correct' : ''}}{{showCorrect['voice_writing_003'][tableData['voice_writing_003'][(rowIdx+1)*3+1].cell_id] === false ? ' wrong' : ''}}"
                type="text"
                value="{{tableAnswers['voice_writing_003'][tableData['voice_writing_003'][(rowIdx+1)*3+1].cell_id]}}"
                bindinput="onTableInput"
                data-table-id="voice_writing_003"
                data-cell-id="{{tableData['voice_writing_003'][(rowIdx+1)*3+1].cell_id}}"
                placeholder="{{tableData['voice_writing_003'][(rowIdx+1)*3+1].hintWord}}"
                style="color:{{!tableAnswers['voice_writing_003'][tableData['voice_writing_003'][(rowIdx+1)*3+1].cell_id] ? '#bbb' : (showCorrect['voice_writing_003'][tableData['voice_writing_003'][(rowIdx+1)*3+1].cell_id] === true ? 'green' : (showCorrect['voice_writing_003'][tableData['voice_writing_003'][(rowIdx+1)*3+1].cell_id] === false ? 'red' : '#333'))}}"
              />
            </view>
            <!-- ä¸€èˆ¬å°†æ¥æ—¶è¢«åŠ¨å†™æ³•è¾“å…¥æ¡† -->
            <view class="voice-writing-cell">
              <input
                class="voice-writing-input{{showCorrect['voice_writing_003'][tableData['voice_writing_003'][(rowIdx+1)*3+2].cell_id] === true ? ' correct' : ''}}{{showCorrect['voice_writing_003'][tableData['voice_writing_003'][(rowIdx+1)*3+2].cell_id] === false ? ' wrong' : ''}}"
                type="text"
                value="{{tableAnswers['voice_writing_003'][tableData['voice_writing_003'][(rowIdx+1)*3+2].cell_id]}}"
                bindinput="onTableInput"
                data-table-id="voice_writing_003"
                data-cell-id="{{tableData['voice_writing_003'][(rowIdx+1)*3+2].cell_id}}"
                placeholder="{{tableData['voice_writing_003'][(rowIdx+1)*3+2].hintWord}}"
                style="color:{{!tableAnswers['voice_writing_003'][tableData['voice_writing_003'][(rowIdx+1)*3+2].cell_id] ? '#bbb' : (showCorrect['voice_writing_003'][tableData['voice_writing_003'][(rowIdx+1)*3+2].cell_id] === true ? 'green' : (showCorrect['voice_writing_003'][tableData['voice_writing_003'][(rowIdx+1)*3+2].cell_id] === false ? 'red' : '#333'))}}"
              />
            </view>
          </view>
        </block>
      </view>
    </view>

    <!-- è¯­æ€å¡«è¡¨ç»ƒä¹ ä¸“å±æ¸²æŸ“(æ¡ä»¶æ—¶æ€) -->
    <view wx:if="{{tableData['voice_writing_004']}}" class="table-container">
      <view class="table-title-row">
        <view class="table-title">è¯·å¡«å†™è¯­æ€è¡¨æ ¼(æ¡ä»¶æ—¶æ€)</view>
      </view>
      <!-- è§„åˆ™è¯´æ˜ -->
      <view class="rules-section" wx:if="{{questionsData && questionsData['voice_writing_004'] && questionsData['voice_writing_004'].rules}}">
        <view class="rules-content">
          <text class="rules-icon">ğŸ“</text>
          <text class="rules-text">{{questionsData['voice_writing_004'].rules}}</text>
        </view>
      </view>
      <view class="table-grid voice-writing-grid">
        <!-- è¡¨å¤´è¡Œ -->
        <view class="table-row voice-header-row">
          <view class="voice-header-cell">{{tableData['voice_writing_004'][0].question}}</view>
          <view class="voice-header-cell">{{tableData['voice_writing_004'][1].question}}</view>
          <view class="voice-header-cell">{{tableData['voice_writing_004'][2].question}}</view>
        </view>
        <!-- 10è¡Œæ•°æ® -->
        <block wx:for="{{[0,1,2,3,4,5,6,7,8,9]}}" wx:for-index="rowIdx" wx:key="rowIdx">
          <view class="table-row voice-writing-row">
            <!-- å•è¯(åŸå½¢)åˆ— -->
            <view class="voice-writing-cell">
              <text class="voice-word">{{tableData['voice_writing_004'][(rowIdx+1)*3].question}}</text>
            </view>
            <!-- æ¡ä»¶æ—¶æ€å†™æ³•è¾“å…¥æ¡† -->
            <view class="voice-writing-cell">
              <input
                class="voice-writing-input{{showCorrect['voice_writing_004'][tableData['voice_writing_004'][(rowIdx+1)*3+1].cell_id] === true ? ' correct' : ''}}{{showCorrect['voice_writing_004'][tableData['voice_writing_004'][(rowIdx+1)*3+1].cell_id] === false ? ' wrong' : ''}}"
                type="text"
                value="{{tableAnswers['voice_writing_004'][tableData['voice_writing_004'][(rowIdx+1)*3+1].cell_id]}}"
                bindinput="onTableInput"
                data-table-id="voice_writing_004"
                data-cell-id="{{tableData['voice_writing_004'][(rowIdx+1)*3+1].cell_id}}"
                placeholder="{{tableData['voice_writing_004'][(rowIdx+1)*3+1].hintWord}}"
                style="color:{{!tableAnswers['voice_writing_004'][tableData['voice_writing_004'][(rowIdx+1)*3+1].cell_id] ? '#bbb' : (showCorrect['voice_writing_004'][tableData['voice_writing_004'][(rowIdx+1)*3+1].cell_id] === true ? 'green' : (showCorrect['voice_writing_004'][tableData['voice_writing_004'][(rowIdx+1)*3+1].cell_id] === false ? 'red' : '#333'))}}"
              />
            </view>
            <!-- æ¡ä»¶æ—¶æ€è¢«åŠ¨å†™æ³•è¾“å…¥æ¡† -->
            <view class="voice-writing-cell">
              <input
                class="voice-writing-input{{showCorrect['voice_writing_004'][tableData['voice_writing_004'][(rowIdx+1)*3+2].cell_id] === true ? ' correct' : ''}}{{showCorrect['voice_writing_004'][tableData['voice_writing_004'][(rowIdx+1)*3+2].cell_id] === false ? ' wrong' : ''}}"
                type="text"
                value="{{tableAnswers['voice_writing_004'][tableData['voice_writing_004'][(rowIdx+1)*3+2].cell_id]}}"
                bindinput="onTableInput"
                data-table-id="voice_writing_004"
                data-cell-id="{{tableData['voice_writing_004'][(rowIdx+1)*3+2].cell_id}}"
                placeholder="{{tableData['voice_writing_004'][(rowIdx+1)*3+2].hintWord}}"
                style="color:{{!tableAnswers['voice_writing_004'][tableData['voice_writing_004'][(rowIdx+1)*3+2].cell_id] ? '#bbb' : (showCorrect['voice_writing_004'][tableData['voice_writing_004'][(rowIdx+1)*3+2].cell_id] === true ? 'green' : (showCorrect['voice_writing_004'][tableData['voice_writing_004'][(rowIdx+1)*3+2].cell_id] === false ? 'red' : '#333'))}}"
              />
            </view>
          </view>
        </block>
      </view>
    </view>

    <!-- è¯­æ€å¡«è¡¨ç»ƒä¹ ä¸“å±æ¸²æŸ“(ç°åœ¨è¿›è¡Œæ—¶) -->
    <view wx:if="{{tableData['voice_writing_005']}}" class="table-container">
      <view class="table-title-row">
        <view class="table-title">è¯·å¡«å†™è¯­æ€è¡¨æ ¼(ç°åœ¨è¿›è¡Œæ—¶)</view>
      </view>
      <!-- è§„åˆ™è¯´æ˜ -->
      <view class="rules-section" wx:if="{{questionsData && questionsData['voice_writing_005'] && questionsData['voice_writing_005'].rules}}">
        <view class="rules-content">
          <text class="rules-icon">ğŸ“</text>
          <text class="rules-text">{{questionsData['voice_writing_005'].rules}}</text>
        </view>
      </view>
      <view class="table-grid voice-writing-grid">
        <!-- è¡¨å¤´è¡Œ -->
        <view class="table-row voice-header-row">
          <view class="voice-header-cell">{{tableData['voice_writing_005'][0].question}}</view>
          <view class="voice-header-cell">{{tableData['voice_writing_005'][1].question}}</view>
          <view class="voice-header-cell">{{tableData['voice_writing_005'][2].question}}</view>
        </view>
        <!-- 10è¡Œæ•°æ® -->
        <block wx:for="{{[0,1,2,3,4,5,6,7,8,9]}}" wx:for-index="rowIdx" wx:key="rowIdx">
          <view class="table-row voice-writing-row">
            <!-- å•è¯(åŸå½¢)åˆ— -->
            <view class="voice-writing-cell">
              <text class="voice-word">{{tableData['voice_writing_005'][(rowIdx+1)*3].question}}</text>
            </view>
            <!-- ç°åœ¨è¿›è¡Œæ—¶å†™æ³•è¾“å…¥æ¡† -->
            <view class="voice-writing-cell">
              <input
                class="voice-writing-input{{showCorrect['voice_writing_005'][tableData['voice_writing_005'][(rowIdx+1)*3+1].cell_id] === true ? ' correct' : ''}}{{showCorrect['voice_writing_005'][tableData['voice_writing_005'][(rowIdx+1)*3+1].cell_id] === false ? ' wrong' : ''}}"
                type="text"
                value="{{tableAnswers['voice_writing_005'][tableData['voice_writing_005'][(rowIdx+1)*3+1].cell_id]}}"
                bindinput="onTableInput"
                data-table-id="voice_writing_005"
                data-cell-id="{{tableData['voice_writing_005'][(rowIdx+1)*3+1].cell_id}}"
                placeholder="{{tableData['voice_writing_005'][(rowIdx+1)*3+1].hintWord}}"
                style="color:{{!tableAnswers['voice_writing_005'][tableData['voice_writing_005'][(rowIdx+1)*3+1].cell_id] ? '#bbb' : (showCorrect['voice_writing_005'][tableData['voice_writing_005'][(rowIdx+1)*3+1].cell_id] === true ? 'green' : (showCorrect['voice_writing_005'][tableData['voice_writing_005'][(rowIdx+1)*3+1].cell_id] === false ? 'red' : '#333'))}}"
              />
            </view>
            <!-- ç°åœ¨è¿›è¡Œæ—¶è¢«åŠ¨å†™æ³•è¾“å…¥æ¡† -->
            <view class="voice-writing-cell">
              <input
                class="voice-writing-input{{showCorrect['voice_writing_005'][tableData['voice_writing_005'][(rowIdx+1)*3+2].cell_id] === true ? ' correct' : ''}}{{showCorrect['voice_writing_005'][tableData['voice_writing_005'][(rowIdx+1)*3+2].cell_id] === false ? ' wrong' : ''}}"
                type="text"
                value="{{tableAnswers['voice_writing_005'][tableData['voice_writing_005'][(rowIdx+1)*3+2].cell_id]}}"
                bindinput="onTableInput"
                data-table-id="voice_writing_005"
                data-cell-id="{{tableData['voice_writing_005'][(rowIdx+1)*3+2].cell_id}}"
                placeholder="{{tableData['voice_writing_005'][(rowIdx+1)*3+2].hintWord}}"
                style="color:{{!tableAnswers['voice_writing_005'][tableData['voice_writing_005'][(rowIdx+1)*3+2].cell_id] ? '#bbb' : (showCorrect['voice_writing_005'][tableData['voice_writing_005'][(rowIdx+1)*3+2].cell_id] === true ? 'green' : (showCorrect['voice_writing_005'][tableData['voice_writing_005'][(rowIdx+1)*3+2].cell_id] === false ? 'red' : '#333'))}}"
              />
            </view>
          </view>
        </block>
      </view>
    </view>

    <!-- è¯­æ€å¡«è¡¨ç»ƒä¹ ä¸“å±æ¸²æŸ“(è¿‡å»è¿›è¡Œæ—¶) -->
    <view wx:if="{{tableData['voice_writing_006']}}" class="table-container">
      <view class="table-title-row">
        <view class="table-title">è¯·å¡«å†™è¯­æ€è¡¨æ ¼(è¿‡å»è¿›è¡Œæ—¶)</view>
      </view>
      <!-- è§„åˆ™è¯´æ˜ -->
      <view class="rules-section" wx:if="{{questionsData && questionsData['voice_writing_006'] && questionsData['voice_writing_006'].rules}}">
        <view class="rules-content">
          <text class="rules-icon">ğŸ“</text>
          <text class="rules-text">{{questionsData['voice_writing_006'].rules}}</text>
        </view>
      </view>
      <view class="table-grid voice-writing-grid">
        <!-- è¡¨å¤´è¡Œ -->
        <view class="table-row voice-header-row">
          <view class="voice-header-cell">{{tableData['voice_writing_006'][0].question}}</view>
          <view class="voice-header-cell">{{tableData['voice_writing_006'][1].question}}</view>
          <view class="voice-header-cell">{{tableData['voice_writing_006'][2].question}}</view>
        </view>
        <!-- 10è¡Œæ•°æ® -->
        <block wx:for="{{[0,1,2,3,4,5,6,7,8,9]}}" wx:for-index="rowIdx" wx:key="rowIdx">
          <view class="table-row voice-writing-row">
            <!-- å•è¯(åŸå½¢)åˆ— -->
            <view class="voice-writing-cell">
              <text class="voice-word">{{tableData['voice_writing_006'][(rowIdx+1)*3].question}}</text>
            </view>
            <!-- è¿‡å»è¿›è¡Œæ—¶å†™æ³•è¾“å…¥æ¡† -->
            <view class="voice-writing-cell">
              <input
                class="voice-writing-input{{showCorrect['voice_writing_006'][tableData['voice_writing_006'][(rowIdx+1)*3+1].cell_id] === true ? ' correct' : ''}}{{showCorrect['voice_writing_006'][tableData['voice_writing_006'][(rowIdx+1)*3+1].cell_id] === false ? ' wrong' : ''}}"
                type="text"
                value="{{tableAnswers['voice_writing_006'][tableData['voice_writing_006'][(rowIdx+1)*3+1].cell_id]}}"
                bindinput="onTableInput"
                data-table-id="voice_writing_006"
                data-cell-id="{{tableData['voice_writing_006'][(rowIdx+1)*3+1].cell_id}}"
                placeholder="{{tableData['voice_writing_006'][(rowIdx+1)*3+1].hintWord}}"
                style="color:{{!tableAnswers['voice_writing_006'][tableData['voice_writing_006'][(rowIdx+1)*3+1].cell_id] ? '#bbb' : (showCorrect['voice_writing_006'][tableData['voice_writing_006'][(rowIdx+1)*3+1].cell_id] === true ? 'green' : (showCorrect['voice_writing_006'][tableData['voice_writing_006'][(rowIdx+1)*3+1].cell_id] === false ? 'red' : '#333'))}}"
              />
            </view>
            <!-- è¿‡å»è¿›è¡Œæ—¶è¢«åŠ¨å†™æ³•è¾“å…¥æ¡† -->
            <view class="voice-writing-cell">
              <input
                class="voice-writing-input{{showCorrect['voice_writing_006'][tableData['voice_writing_006'][(rowIdx+1)*3+2].cell_id] === true ? ' correct' : ''}}{{showCorrect['voice_writing_006'][tableData['voice_writing_006'][(rowIdx+1)*3+2].cell_id] === false ? ' wrong' : ''}}"
                type="text"
                value="{{tableAnswers['voice_writing_006'][tableData['voice_writing_006'][(rowIdx+1)*3+2].cell_id]}}"
                bindinput="onTableInput"
                data-table-id="voice_writing_006"
                data-cell-id="{{tableData['voice_writing_006'][(rowIdx+1)*3+2].cell_id}}"
                placeholder="{{tableData['voice_writing_006'][(rowIdx+1)*3+2].hintWord}}"
                style="color:{{!tableAnswers['voice_writing_006'][tableData['voice_writing_006'][(rowIdx+1)*3+2].cell_id] ? '#bbb' : (showCorrect['voice_writing_006'][tableData['voice_writing_006'][(rowIdx+1)*3+2].cell_id] === true ? 'green' : (showCorrect['voice_writing_006'][tableData['voice_writing_006'][(rowIdx+1)*3+2].cell_id] === false ? 'red' : '#333'))}}"
              />
            </view>
          </view>
        </block>
      </view>
    </view>

    <!-- è¯­æ€å¡«è¡¨ç»ƒä¹ ä¸“å±æ¸²æŸ“(ç°åœ¨å®Œæˆæ—¶) -->
    <view wx:if="{{tableData['voice_writing_007']}}" class="table-container">
      <view class="table-title-row">
        <view class="table-title">è¯·å¡«å†™è¯­æ€è¡¨æ ¼(ç°åœ¨å®Œæˆæ—¶)</view>
      </view>
      <!-- è§„åˆ™è¯´æ˜ -->
      <view class="rules-section" wx:if="{{questionsData && questionsData['voice_writing_007'] && questionsData['voice_writing_007'].rules}}">
        <view class="rules-content">
          <text class="rules-icon">ğŸ“</text>
          <text class="rules-text">{{questionsData['voice_writing_007'].rules}}</text>
        </view>
      </view>
      <view class="table-grid voice-writing-grid">
        <!-- è¡¨å¤´è¡Œ -->
        <view class="table-row voice-header-row">
          <view class="voice-header-cell">{{tableData['voice_writing_007'][0].question}}</view>
          <view class="voice-header-cell">{{tableData['voice_writing_007'][1].question}}</view>
          <view class="voice-header-cell">{{tableData['voice_writing_007'][2].question}}</view>
        </view>
        <!-- 10è¡Œæ•°æ® -->
        <block wx:for="{{[0,1,2,3,4,5,6,7,8,9]}}" wx:for-index="rowIdx" wx:key="rowIdx">
          <view class="table-row voice-writing-row">
            <!-- å•è¯(åŸå½¢)åˆ— -->
            <view class="voice-writing-cell">
              <text class="voice-word">{{tableData['voice_writing_007'][(rowIdx+1)*3].question}}</text>
            </view>
            <!-- ç°åœ¨å®Œæˆæ—¶å†™æ³•è¾“å…¥æ¡† -->
            <view class="voice-writing-cell">
              <input
                class="voice-writing-input{{showCorrect['voice_writing_007'][tableData['voice_writing_007'][(rowIdx+1)*3+1].cell_id] === true ? ' correct' : ''}}{{showCorrect['voice_writing_007'][tableData['voice_writing_007'][(rowIdx+1)*3+1].cell_id] === false ? ' wrong' : ''}}"
                type="text"
                value="{{tableAnswers['voice_writing_007'][tableData['voice_writing_007'][(rowIdx+1)*3+1].cell_id]}}"
                bindinput="onTableInput"
                data-table-id="voice_writing_007"
                data-cell-id="{{tableData['voice_writing_007'][(rowIdx+1)*3+1].cell_id}}"
                placeholder="{{tableData['voice_writing_007'][(rowIdx+1)*3+1].hintWord}}"
                style="color:{{!tableAnswers['voice_writing_007'][tableData['voice_writing_007'][(rowIdx+1)*3+1].cell_id] ? '#bbb' : (showCorrect['voice_writing_007'][tableData['voice_writing_007'][(rowIdx+1)*3+1].cell_id] === true ? 'green' : (showCorrect['voice_writing_007'][tableData['voice_writing_007'][(rowIdx+1)*3+1].cell_id] === false ? 'red' : '#333'))}}"
              />
            </view>
            <!-- ç°åœ¨å®Œæˆæ—¶è¢«åŠ¨å†™æ³•è¾“å…¥æ¡† -->
            <view class="voice-writing-cell">
              <input
                class="voice-writing-input{{showCorrect['voice_writing_007'][tableData['voice_writing_007'][(rowIdx+1)*3+2].cell_id] === true ? ' correct' : ''}}{{showCorrect['voice_writing_007'][tableData['voice_writing_007'][(rowIdx+1)*3+2].cell_id] === false ? ' wrong' : ''}}"
                type="text"
                value="{{tableAnswers['voice_writing_007'][tableData['voice_writing_007'][(rowIdx+1)*3+2].cell_id]}}"
                bindinput="onTableInput"
                data-table-id="voice_writing_007"
                data-cell-id="{{tableData['voice_writing_007'][(rowIdx+1)*3+2].cell_id}}"
                placeholder="{{tableData['voice_writing_007'][(rowIdx+1)*3+2].hintWord}}"
                style="color:{{!tableAnswers['voice_writing_007'][tableData['voice_writing_007'][(rowIdx+1)*3+2].cell_id] ? '#bbb' : (showCorrect['voice_writing_007'][tableData['voice_writing_007'][(rowIdx+1)*3+2].cell_id] === true ? 'green' : (showCorrect['voice_writing_007'][tableData['voice_writing_007'][(rowIdx+1)*3+2].cell_id] === false ? 'red' : '#333'))}}"
              />
            </view>
          </view>
        </block>
      </view>
    </view>

    <!-- è¯­æ€å¡«è¡¨ç»ƒä¹ ä¸“å±æ¸²æŸ“(è¿‡å»å®Œæˆæ—¶) -->
    <view wx:if="{{tableData['voice_writing_008']}}" class="table-container">
      <view class="table-title-row">
        <view class="table-title">è¯·å¡«å†™è¯­æ€è¡¨æ ¼(è¿‡å»å®Œæˆæ—¶)</view>
      </view>
      <!-- è§„åˆ™è¯´æ˜ -->
      <view class="rules-section" wx:if="{{questionsData && questionsData['voice_writing_008'] && questionsData['voice_writing_008'].rules}}">
        <view class="rules-content">
          <text class="rules-icon">ğŸ“</text>
          <text class="rules-text">{{questionsData['voice_writing_008'].rules}}</text>
        </view>
      </view>
      <view class="table-grid voice-writing-grid">
        <!-- è¡¨å¤´è¡Œ -->
        <view class="table-row voice-header-row">
          <view class="voice-header-cell">{{tableData['voice_writing_008'][0].question}}</view>
          <view class="voice-header-cell">{{tableData['voice_writing_008'][1].question}}</view>
          <view class="voice-header-cell">{{tableData['voice_writing_008'][2].question}}</view>
        </view>
        <!-- 10è¡Œæ•°æ® -->
        <block wx:for="{{[0,1,2,3,4,5,6,7,8,9]}}" wx:for-index="rowIdx" wx:key="rowIdx">
          <view class="table-row voice-writing-row">
            <!-- å•è¯(åŸå½¢)åˆ— -->
            <view class="voice-writing-cell">
              <text class="voice-word">{{tableData['voice_writing_008'][(rowIdx+1)*3].question}}</text>
            </view>
            <!-- è¿‡å»å®Œæˆæ—¶å†™æ³•è¾“å…¥æ¡† -->
            <view class="voice-writing-cell">
              <input
                class="voice-writing-input{{showCorrect['voice_writing_008'][tableData['voice_writing_008'][(rowIdx+1)*3+1].cell_id] === true ? ' correct' : ''}}{{showCorrect['voice_writing_008'][tableData['voice_writing_008'][(rowIdx+1)*3+1].cell_id] === false ? ' wrong' : ''}}"
                type="text"
                value="{{tableAnswers['voice_writing_008'][tableData['voice_writing_008'][(rowIdx+1)*3+1].cell_id]}}"
                bindinput="onTableInput"
                data-table-id="voice_writing_008"
                data-cell-id="{{tableData['voice_writing_008'][(rowIdx+1)*3+1].cell_id}}"
                placeholder="{{tableData['voice_writing_008'][(rowIdx+1)*3+1].hintWord}}"
                style="color:{{!tableAnswers['voice_writing_008'][tableData['voice_writing_008'][(rowIdx+1)*3+1].cell_id] ? '#bbb' : (showCorrect['voice_writing_008'][tableData['voice_writing_008'][(rowIdx+1)*3+1].cell_id] === true ? 'green' : (showCorrect['voice_writing_008'][tableData['voice_writing_008'][(rowIdx+1)*3+1].cell_id] === false ? 'red' : '#333'))}}"
              />
            </view>
            <!-- è¿‡å»å®Œæˆæ—¶è¢«åŠ¨å†™æ³•è¾“å…¥æ¡† -->
            <view class="voice-writing-cell">
              <input
                class="voice-writing-input{{showCorrect['voice_writing_008'][tableData['voice_writing_008'][(rowIdx+1)*3+2].cell_id] === true ? ' correct' : ''}}{{showCorrect['voice_writing_008'][tableData['voice_writing_008'][(rowIdx+1)*3+2].cell_id] === false ? ' wrong' : ''}}"
                type="text"
                value="{{tableAnswers['voice_writing_008'][tableData['voice_writing_008'][(rowIdx+1)*3+2].cell_id]}}"
                bindinput="onTableInput"
                data-table-id="voice_writing_008"
                data-cell-id="{{tableData['voice_writing_008'][(rowIdx+1)*3+2].cell_id}}"
                placeholder="{{tableData['voice_writing_008'][(rowIdx+1)*3+2].hintWord}}"
                style="color:{{!tableAnswers['voice_writing_008'][tableData['voice_writing_008'][(rowIdx+1)*3+2].cell_id] ? '#bbb' : (showCorrect['voice_writing_008'][tableData['voice_writing_008'][(rowIdx+1)*3+2].cell_id] === true ? 'green' : (showCorrect['voice_writing_008'][tableData['voice_writing_008'][(rowIdx+1)*3+2].cell_id] === false ? 'red' : '#333'))}}"
              />
            </view>
          </view>
        </block>
      </view>
    </view>

    <!-- å½¢å®¹è¯æ¯”è¾ƒçº§è¡¨æ ¼ä¸“å±æ¸²æŸ“ -->
    <view wx:if="{{tableData['comparative_table_001']}}" class="table-container">
      <view class="table-title-row">
        <view class="table-title">è¯·å†™å‡ºæ ¼å­å†…å•è¯çš„æ¯”è¾ƒçº§å½¢å¼</view>
      </view>
      <view class="table-grid adjective-table-grid">
        <block wx:for="{{currentTableData.exerciseRows}}" wx:for-item="row" wx:for-index="rowIndex" wx:key="rowIndex" wx:if="{{rowIndex > 0}}">
          <view class="adjective-table-row">
            <!-- 4ä¸ªå•è¯+è¾“å…¥æ¡† -->
            <block wx:for="{{[0,1,2,3]}}" wx:for-index="colIndex" wx:key="colIndex">
              <view class="adjective-word-cell">
                <text class="adjective-word-hint">{{row[colIndex].word}}</text>
                <input 
                  class="adjective-table-input {{tableInputStatus[currentTableData.id + '_' + rowIndex + '_' + colIndex]}}"
                  type="text"
                  value="{{tableUserInputs[currentTableData.id + '_' + rowIndex + '_' + colIndex]}}"
                  bindinput="onTableInput"
                  data-row="{{rowIndex}}"
                  data-col="{{colIndex}}"
                  placeholder="è¯·è¾“å…¥ç­”æ¡ˆ"
                />
              </view>
            </block>
            <!-- è§„åˆ™åˆ— -->
            <view class="adjective-rule-cell">
              <view class="clickable-rule" bindtap="onRuleTap" data-row="{{rowIndex}}" data-col="4">
                <text class="lightbulb" style="color:{{ruleShowFullContent[rowIndex + '_4'] ? '#eb2f96' : '#ccc'}}">ğŸ’¡</text>
                <text class="rule-text">{{ruleShowFullContent[rowIndex + '_4'] ? row[4].fullContent : row[4].text}}</text>
              </view>
            </view>
          </view>
        </block>
      </view>
    </view>

    <!-- å½¢å®¹è¯æœ€é«˜çº§è¡¨æ ¼ä¸“å±æ¸²æŸ“ -->
    <view wx:if="{{tableData['superlative_table_001']}}" class="table-container">
      <view class="table-title-row">
        <view class="table-title">è¯·å†™å‡ºæ ¼å­å†…å•è¯çš„æœ€é«˜çº§å½¢å¼</view>
      </view>
      <view class="table-grid adjective-table-grid">
        <block wx:for="{{currentTableData.exerciseRows}}" wx:for-item="row" wx:for-index="rowIndex" wx:key="rowIndex" wx:if="{{rowIndex > 0}}">
          <view class="adjective-table-row">
            <!-- 4ä¸ªå•è¯+è¾“å…¥æ¡† -->
            <block wx:for="{{[0,1,2,3]}}" wx:for-index="colIndex" wx:key="colIndex">
              <view class="adjective-word-cell">
                <text class="adjective-word-hint">{{row[colIndex].word}}</text>
                <input 
                  class="adjective-table-input {{tableInputStatus[currentTableData.id + '_' + rowIndex + '_' + colIndex]}}"
                  type="text"
                  value="{{tableUserInputs[currentTableData.id + '_' + rowIndex + '_' + colIndex]}}"
                  bindinput="onTableInput"
                  data-row="{{rowIndex}}"
                  data-col="{{colIndex}}"
                  placeholder="è¯·è¾“å…¥ç­”æ¡ˆ"
                />
              </view>
            </block>
            <!-- è§„åˆ™åˆ— -->
            <view class="adjective-rule-cell">
              <view class="clickable-rule" bindtap="onRuleTap" data-row="{{rowIndex}}" data-col="4">
                <text class="lightbulb" style="color:{{ruleShowFullContent[rowIndex + '_4'] ? '#eb2f96' : '#ccc'}}">ğŸ’¡</text>
                <text class="rule-text">{{ruleShowFullContent[rowIndex + '_4'] ? row[4].fullContent : row[4].text}}</text>
              </view>
            </view>
          </view>
        </block>
      </view>
    </view>

    <!-- è¡¨æ ¼è¿›åº¦å¯è§†åŒ–ç»„ä»¶ -->
    <include src="./table-progress.wxml" />

    <!-- å¯¼å‡ºæŒ‰é’® -->
    <view class="export-button-container" wx:if="{{questions.length > 0}}">
      <button class="export-button" bindtap="showExportModal">
        <text class="export-icon">ğŸ“„</text>
        <text class="export-text">å¯¼å‡ºä¹ é¢˜</text>
      </button>
    </view>

    <!-- æ–°çš„ä»£è¯è¡¨æ ¼ä¸“å±æ¸²æŸ“ -->
    <view wx:for="{{Object.keys(tableData)}}" wx:for-item="tableId" wx:key="tableId" wx:if="{{tableId.startsWith('pronoun_table_')}}" class="table-container">
      <view class="table-title">{{tableData[tableId].frontendName || tableId}}</view>
      
      <!-- è¡¨å¤´ -->
      <view class="pronoun-table-header">
        <view wx:for="{{tableData[tableId].tableData.headers}}" wx:key="index" wx:for-item="header" class="pronoun-header-cell">
          {{header}}
        </view>
      </view>
      
      <!-- è¡¨æ ¼å†…å®¹ -->
      <view wx:for="{{tableData[tableId].tableData.rows}}" wx:key="rowIndex" wx:for-item="row" wx:for-index="rowIndex" class="pronoun-table-row">
        <view wx:for="{{row}}" wx:key="colIndex" wx:for-item="cell" wx:for-index="colIndex" class="pronoun-table-cell">
          <view wx:if="{{colIndex === 0}}" class="pronoun-label">
            {{cell}}
          </view>
          <input wx:else 
                 class="pronoun-input{{pronounInputStatus[tableId + '_' + rowIndex + '_' + colIndex] === 'correct' ? ' correct' : ''}}{{pronounInputStatus[tableId + '_' + rowIndex + '_' + colIndex] === 'wrong' ? ' wrong' : ''}}"
                 type="text"
                 placeholder=""
                 value="{{pronounUserInputs[tableId + '_' + rowIndex + '_' + colIndex] || ''}}"
                 bindinput="onPronounInput"
                 data-table="{{tableId}}"
                 data-row="{{rowIndex}}"
                 data-col="{{colIndex}}" />
        </view>
      </view>
      
      <view class="action-buttons">
        <button class="action-btn hint-btn" bindtap="showHintOptions">
          <text class="btn-icon">ğŸ’¡</text>
          <text class="btn-text">å°å°çš„æç¤º</text>
        </button>
        <button class="action-btn answer-btn" bindtap="showFullAnswer" data-table-id="{{tableId}}">
          <text class="btn-icon">ğŸ“š</text>
          <text class="btn-text">æˆ‘å†è®°ä¼šå„¿</text>
        </button>
      </view>
    </view>

    <!-- ä»‹è¯è¡¨æ ¼ä¸“å±æ¸²æŸ“ -->
    <view wx:for="{{Object.keys(tablesData)}}" wx:for-item="tableId" wx:key="tableId" wx:if="{{tableId === 'preposition_table_002'}}" class="table-container">
      <view class="table-title">{{tablesData[tableId].frontendName || tableId}}</view>
      
      <!-- è¡¨å¤´ -->
      <view class="preposition-table-header">
        <view wx:for="{{tablesData[tableId].tableData.headers}}" wx:key="index" wx:for-item="header" class="preposition-header-cell">
          {{header}}
        </view>
      </view>
      
      <!-- è¡¨æ ¼å†…å®¹ -->
      <view wx:for="{{tablesData[tableId].tableData.rows}}" wx:key="rowIndex" wx:for-item="row" wx:for-index="rowIndex" class="preposition-table-row">
        <view wx:for="{{row}}" wx:key="colIndex" wx:for-item="cell" wx:for-index="colIndex" class="preposition-table-cell">
          <!-- å·¦ä¾§ï¼šæç¤ºæ–‡å­—åœ¨ä¸Šï¼Œè¾“å…¥æ¡†åœ¨ä¸‹ -->
          <view wx:if="{{colIndex === 0}}" class="preposition-hint-container">
            <text class="preposition-hint-text">{{cell}}</text>
            <input 
              class="preposition-input{{prepositionInputStatus[tableId + '_' + rowIndex + '_' + colIndex] === 'correct' ? ' correct' : ''}}{{prepositionInputStatus[tableId + '_' + rowIndex + '_' + colIndex] === 'wrong' ? ' wrong' : ''}}"
              type="text"
              placeholder="è¯·è¾“å…¥ç­”æ¡ˆ"
              value="{{prepositionUserInputs[tableId + '_' + rowIndex + '_' + colIndex] || ''}}"
              bindinput="onPrepositionInput"
              data-table="{{tableId}}"
              data-row="{{rowIndex}}"
              data-col="{{colIndex}}" />
          </view>
          <!-- å³ä¾§ï¼šç›´æ¥æ˜¾ç¤ºä¸­æ–‡å«ä¹‰ -->
          <view wx:else class="preposition-meaning">
            <text class="preposition-meaning-text">{{cell}}</text>
          </view>
        </view>
      </view>
      
      <view class="action-buttons">
        <button class="action-btn hint-btn" bindtap="showHintOptions">
          <text class="btn-icon">ğŸ’¡</text>
          <text class="btn-text">å°å°çš„æç¤º</text>
        </button>
        <button class="action-btn answer-btn" bindtap="showFullAnswer" data-table-id="{{tableId}}">
          <text class="btn-icon">ğŸ“š</text>
          <text class="btn-text">æˆ‘å†è®°ä¼šå„¿</text>
        </button>
      </view>
    </view>

    <!-- å…¶å®ƒè¡¨æ ¼é€šç”¨æ¸²æŸ“ -->
    <view wx:for="{{Object.keys(tableData)}}" wx:for-item="tableId" wx:key="tableId" wx:if="{{tableId !== 'noun_001' && tableId !== 'noun_002' && tableId !== 'noun_003' && tableId !== 'noun_004' && tableId !== 'pronoun_001' && tableId !== 'pronoun_002' && tableId !== 'present_participle_001' && tableId !== 'past_participle_001' && tableId !== 'tense_writing_001' && tableId !== 'comparison_prefix_suffix_001' && tableId !== 'comparison_comparative_001' && tableId !== 'comparison_superlative_001' && tableId !== 'adverb_writing_001' && tableId !== 'voice_writing_001' && tableId !== 'voice_writing_002' && tableId !== 'voice_writing_003' && tableId !== 'voice_writing_004' && tableId !== 'voice_writing_005' && tableId !== 'voice_writing_006' && tableId !== 'voice_writing_007' && tableId !== 'voice_writing_008' && tableId !== 'comparative_table_001' && tableId !== 'superlative_table_001' && !tableId.startsWith('pronoun_table_')}}" class="table-container">
      <view class="table-title">{{tableId}}</view>
      <view class="table-grid">
        <view wx:for="{{tableData[tableId]}}" wx:key="cell_id" wx:for-item="cell">
          <block wx:if="{{cell.is_header}}">
            <view class="table-row header-row">
              <text class="table-cell header-cell">{{cell.question}}</text>
            </view>
          </block>
          <block wx:else>
            <view class="table-row">
              <text class="table-cell">{{cell.question}}</text>
              <input class="table-input{{showCorrect[tableId][cell.cell_id] === true ? ' correct' : ''}}{{showCorrect[tableId][cell.cell_id] === false ? ' wrong' : ''}}"
                type="text"
                value="{{tableAnswers[tableId][cell.cell_id]}}"
                bindinput="onTableInput"
                data-table-id="{{tableId}}"
                data-cell-id="{{cell.cell_id}}"
                placeholder=""/>
            </view>
          </block>
        </view>
      </view>
      <view class="action-buttons">
        <button class="action-btn hint-btn" bindtap="showHintOptions">
          <text class="btn-icon">ğŸ’¡</text>
          <text class="btn-text">å°å°çš„æç¤º</text>
        </button>
        <button class="action-btn answer-btn" bindtap="showFullAnswer" data-table-id="{{tableId}}">
          <text class="btn-icon">ğŸ“š</text>
          <text class="btn-text">æˆ‘å†è®°ä¼šå„¿</text>
        </button>
      </view>
    </view>
  </view>

  <view class="footer">
    <!-- æ‰¹æ”¹å®Œæˆåçš„åŒæŒ‰é’® -->
    <view class="double-btn-container" wx:if="{{correctionCompleted}}">
      <button class="correction-btn variant-btn {{!hasWrongQuestions ? 'disabled' : ''}}" bindtap="startVariantTraining" disabled="{{!hasWrongQuestions}}">
        <text class="btn-icon">ğŸ”„</text>
        <text class="btn-text">é”™é¢˜å˜å¼è®­ç»ƒ</text>
      </button>
      <button class="correction-btn standard-btn" bindtap="startStandardTraining">
        <text class="btn-icon">âœï¸</text>
        <text class="btn-text">ä¹¦å†™è§„èŒƒè®­ç»ƒ</text>
      </button>
    </view>
    
    <!-- åŸæœ‰çš„å•æŒ‰é’®é€»è¾‘ -->
    <view wx:else>
      <button class="submit-btn" bindtap="{{exerciseType === 'writing' ? 'submitTableAnswers' : 'submitAnswers'}}" loading="{{submitting}}" disabled="{{submitting}}">
        <text class="submit-icon" wx:if="{{!submitting}}">ğŸ“</text>
        <text class="submit-text">{{submitting ? 'ç»Ÿè®¡ä¸­...' : 'æäº¤å¹¶ç»Ÿè®¡'}}</text>
      </button>
    </view>
  </view>
  
  <!-- ç‰¹æ®Šç±»åˆ«å¼•å¯¼æŒ‰é’® -->
  <view class="special-guide-bar" wx:if="{{showSpecialGuide && !submitting}}">
    <view class="guide-content">
      <text class="guide-icon">ğŸ“</text>
      <text class="guide-text">æƒ³è¦æ›´å¤šç»ƒä¹ ï¼Ÿå»"ä¹¦å†™è§„èŒƒ"æŸ¥çœ‹å®Œæ•´è¡¨æ ¼</text>
    </view>
    <button class="guide-btn" bindtap="navigateToWritingRules">
      å‰å¾€ä¹¦å†™è§„èŒƒ
    </button>
  </view>
  
  <!-- é€‰æ‹©æç¤ºç±»å‹å¼¹çª— -->
  <view class="modal-overlay" wx:if="{{showHintModal}}" bindtap="closeHintModal">
    <view class="modal-content" catchtap="stopPropagation">
      <view class="modal-header">
        <text class="modal-title">é€‰æ‹©æç¤ºç±»å‹</text>
        <text class="modal-close" bindtap="closeHintModal">Ã—</text>
      </view>
      <view class="modal-body">
        <view class="hint-options">
          <view class="hint-option" 
                wx:for="{{hintOptions}}" 
                wx:key="index" 
                wx:for-item="option"
                bindtap="selectHintType" 
                data-type="{{option}}">
            <text class="hint-text">{{option}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- æç¤ºå†…å®¹å¼¹çª— -->
  <view class="modal-overlay" wx:if="{{showHintContentModal}}" bindtap="closeHintContentModal">
    <view class="modal-content" catchtap="stopPropagation">
      <view class="modal-header">
        <text class="modal-title">æç¤º</text>
        <text class="modal-close" bindtap="closeHintContentModal">Ã—</text>
      </view>
      <view class="modal-body">
        <text style="font-size:28rpx;line-height:1.7;white-space:pre-line;">{{hintContent}}</text>
      </view>
    </view>
  </view>

  <!-- ç­”æ¡ˆå¼¹çª— -->
  <view class="modal-overlay" wx:if="{{showAnswerModal}}" bindtap="closeAnswerModal">
    <view class="modal-content answer-modal" catchtap="stopPropagation">
      <view class="modal-header">
        <text class="modal-title">{{currentAnswer.title}}</text>
        <text class="modal-close" bindtap="closeAnswerModal">Ã—</text>
      </view>
      <view class="modal-body">
        <view class="answer-table">
          <view class="table-header">
            <view class="table-cell header-cell" wx:for="{{currentAnswer.headers}}" wx:key="index">
              {{item}}
            </view>
          </view>
          <view class="table-row" wx:for="{{currentAnswer.data}}" wx:key="rowIndex" wx:for-item="row" wx:for-index="rowIndex">
            <view class="table-cell" wx:for="{{row}}" wx:key="colIndex" wx:for-item="cell" wx:for-index="colIndex">
              {{cell}}
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- æ–°å¢ï¼šçŸ¥è¯†ç‚¹åŒå‘è”åŠ¨æ¨¡å— - çŸ¥è¯†å¡ç‰‡å¼¹çª— -->
  
  <!-- åç¼€çŸ¥è¯†å¡ç‰‡ -->
  <view class="modal-overlay" wx:if="{{showSuffixCard}}" bindtap="closeSuffixCard">
    <view class="modal-content knowledge-card" catchtap="stopPropagation">
      <view class="modal-header">
        <text class="modal-title">ğŸ“– {{currentNoteData.frontendName || 'è¯­æ³•çŸ¥è¯†å¡'}}</text>
        <text class="modal-close" bindtap="closeSuffixCard">Ã—</text>
      </view>
      <view class="modal-body">
        <view class="knowledge-content">
          <!-- ä½¿ç”¨åŸç”ŸWXMLç»„ä»¶æ˜¾ç¤ºç»“æ„åŒ–å†…å®¹ -->
          <view wx:if="{{currentStructuredContent && currentStructuredContent.length > 0}}" class="structured-note-content">
            <view wx:for="{{currentStructuredContent}}" wx:key="index" wx:for-item="section" class="note-section">
              <view class="section-title">{{section.title}}</view>
              
              <!-- å­ç« èŠ‚ -->
              <view wx:if="{{section.subsections.length > 0}}">
                <view wx:for="{{section.subsections}}" wx:key="subIndex" wx:for-item="subsection" wx:for-index="subIndex" class="subsection">
                  <view class="subsection-title">{{subsection.title}}</view>
                                     <view wx:for="{{subsection.items}}" wx:key="itemIndex" wx:for-item="item" wx:for-index="itemIndex" class="note-item">
                     <!-- è§„åˆ™ä¸ä¾‹å­ç»„åˆ -->
                     <view wx:if="{{item.type === 'rule-with-examples'}}" class="rule-examples-group">
                       <view class="rule-text">{{item.rule.content}}</view>
                       <view wx:for="{{item.examples}}" wx:key="exampleIndex" wx:for-item="example" wx:for-index="exampleIndex" class="example-item">
                         {{example.content}}
                       </view>
                     </view>
                     <!-- é¢˜ç›®ä¸ç­”æ¡ˆç»„åˆ -->
                     <view wx:elif="{{item.type === 'question-with-answer'}}" class="question-answer-group">
                       <view class="question-text">{{item.question.content}}</view>
                       <view class="answer-text">{{item.answer.content}}</view>
                     </view>
                     <!-- åˆ—è¡¨é¡¹ -->
                     <view wx:elif="{{item.type === 'list'}}" class="list-item">â€¢ {{item.content}}</view>
                     <!-- è¡¨æ ¼ -->
                     <view wx:elif="{{item.type === 'table'}}" class="table-container">
                       <view class="table-row header">
                         <view wx:for="{{item.data.headers}}" wx:key="headerIndex" wx:for-item="header" wx:for-index="headerIndex" class="table-cell header-cell">
                           <text class="table-text header-text">{{header}}</text>
                         </view>
                       </view>
                       <view wx:for="{{item.data.rows}}" wx:key="rowIndex" wx:for-item="row" wx:for-index="rowIndex" class="table-row">
                         <view wx:for="{{row}}" wx:key="cellIndex" wx:for-item="cell" wx:for-index="cellIndex" class="table-cell">
                           <text class="table-text">{{cell}}</text>
                         </view>
                       </view>
                     </view>
                     <!-- è¿ç»­é¢˜ç›® -->
                     <view wx:elif="{{item.type === 'continuous-question'}}" class="continuous-question-item">{{item.content}}</view>
                     <!-- é¢˜ç›® -->
                     <view wx:elif="{{item.type === 'question'}}" class="question-item">{{item.content}}</view>
                     <!-- ç­”æ¡ˆ -->
                     <view wx:elif="{{item.type === 'answer'}}" class="answer-item">{{item.content}}</view>
                     <!-- ç¤ºä¾‹ -->
                     <view wx:elif="{{item.type === 'example'}}" class="example-item">{{item.content}}</view>
                     <!-- è€ƒå¯Ÿç¤ºä¾‹æ ‡é¢˜ -->
                     <view wx:elif="{{item.content && item.content.includes('è€ƒå¯Ÿç¤ºä¾‹')}}" class="exam-example-title">{{item.content}}</view>
                     <!-- æ™®é€šæ–‡æœ¬ -->
                     <view wx:else class="text-item">{{item.content}}</view>
                   </view>
                </view>
              </view>
              
              <!-- ç›´æ¥é¡¹ç›® -->
              <view wx:else>
                                 <view wx:for="{{section.items}}" wx:key="itemIndex" wx:for-item="item" wx:for-index="itemIndex" class="note-item">
                   <!-- è§„åˆ™ä¸ä¾‹å­ç»„åˆ -->
                   <view wx:if="{{item.type === 'rule-with-examples'}}" class="rule-examples-group">
                     <view class="rule-text">{{item.rule.content}}</view>
                     <view wx:for="{{item.examples}}" wx:key="exampleIndex" wx:for-item="example" wx:for-index="exampleIndex" class="example-item">
                       {{example.content}}
                     </view>
                   </view>
                   <!-- é¢˜ç›®ä¸ç­”æ¡ˆç»„åˆ -->
                   <view wx:elif="{{item.type === 'question-with-answer'}}" class="question-answer-group">
                     <view class="question-text">{{item.question.content}}</view>
                     <view class="answer-text">{{item.answer.content}}</view>
                   </view>
                   <!-- è¿ç»­å¾ªç¯ç»“æ„ç»„ -->
                   <view wx:elif="{{item.type === 'consecutive-cycle-groups'}}" class="consecutive-cycle-groups">
                     <view wx:for="{{item.groups}}" wx:key="groupIndex" wx:for-item="group" wx:for-index="groupIndex" class="cycle-group">
                       <view wx:for="{{group.items}}" wx:key="cycleIndex" wx:for-item="cycleItem" wx:for-index="cycleIndex" class="cycle-item">
                         <view wx:if="{{cycleIndex === 0}}" class="cycle-hint">{{cycleItem.content}}</view>
                         <view wx:elif="{{cycleIndex === 1}}" class="cycle-question">{{cycleItem.content}}</view>
                         <view wx:elif="{{cycleIndex === 2}}" class="cycle-answer">{{cycleItem.content}}</view>
                         <view wx:else class="cycle-extra">{{cycleItem.content}}</view>
                       </view>
                     </view>
                   </view>
                   <!-- å¾ªç¯ç»“æ„ç»„ -->
                   <view wx:elif="{{item.type === 'cycle-group'}}" class="cycle-group">
                     <view wx:for="{{item.items}}" wx:key="cycleIndex" wx:for-item="cycleItem" wx:for-index="cycleIndex" class="cycle-item">
                       <view wx:if="{{cycleIndex === 0}}" class="cycle-hint">{{cycleItem.content}}</view>
                       <view wx:elif="{{cycleIndex === 1}}" class="cycle-question">{{cycleItem.content}}</view>
                       <view wx:elif="{{cycleIndex === 2}}" class="cycle-answer">{{cycleItem.content}}</view>
                       <view wx:else class="cycle-extra">{{cycleItem.content}}</view>
                     </view>
                   </view>
                   <!-- åˆ—è¡¨é¡¹ -->
                   <view wx:elif="{{item.type === 'list'}}" class="list-item">â€¢ {{item.content}}</view>
                   <!-- è¡¨æ ¼ -->
                   <view wx:elif="{{item.type === 'table'}}" class="table-container">
                     <view class="table-row header">
                       <view wx:for="{{item.data.headers}}" wx:key="headerIndex" wx:for-item="header" wx:for-index="headerIndex" class="table-cell header-cell">
                         <text class="table-text header-text">{{header}}</text>
                       </view>
                     </view>
                     <view wx:for="{{item.data.rows}}" wx:key="rowIndex" wx:for-item="row" wx:for-index="rowIndex" class="table-row">
                       <view wx:for="{{row}}" wx:key="cellIndex" wx:for-item="cell" wx:for-index="cellIndex" class="table-cell">
                         <text class="table-text">{{cell}}</text>
                       </view>
                     </view>
                   </view>
                   <!-- ç»ƒä¹ è¡¨æ ¼ -->
                   <view wx:elif="{{item.type === 'practice-table'}}" class="practice-table-container">
                     <view class="practice-table-title">{{item.title}}</view>
                     <view class="table-row header">
                       <view wx:for="{{item.data.headers}}" wx:key="headerIndex" wx:for-item="header" wx:for-index="headerIndex" class="table-cell header-cell">
                         <text class="table-text header-text">{{header}}</text>
                       </view>
                     </view>
                     <view wx:for="{{item.data.rows}}" wx:key="rowIndex" wx:for-item="row" wx:for-index="rowIndex" class="table-row">
                       <view wx:for="{{row}}" wx:key="cellIndex" wx:for-item="cell" wx:for-index="cellIndex" class="table-cell">
                         <text class="table-text">{{cell}}</text>
                       </view>
                     </view>
                   </view>
                   <!-- ç¤ºä¾‹ -->
                   <view wx:elif="{{item.type === 'example'}}" class="example-item">{{item.content}}</view>
                   <!-- æ”¹é”™é¢˜ -->
                   <view wx:elif="{{item.type === 'correction'}}" class="correction-item">{{item.content}}</view>
                   <!-- è€ƒå¯Ÿç¤ºä¾‹æ ‡é¢˜ -->
                   <view wx:elif="{{item.content && item.content.includes('è€ƒå¯Ÿç¤ºä¾‹')}}" class="exam-example-title">{{item.content}}</view>
                   <!-- æ™®é€šæ–‡æœ¬ -->
                   <view wx:else class="text-item">{{item.content}}</view>
                 </view>
              </view>
            </view>
          </view>
          
          <!-- å¤‡ç”¨ï¼šä½¿ç”¨rich-textç»„ä»¶æ˜¾ç¤ºå†…å®¹ -->
          <rich-text wx:elif="{{currentNoteData}}" class="knowledge-rich-text" nodes="{{currentNoteData.htmlContent || currentNoteData.noteContent || currentNoteData.content}}"></rich-text>
          
          <!-- é»˜è®¤å†…å®¹ -->
          <text class="knowledge-text" wx:else>
            åè¯å˜å¤æ•°è§„åˆ™ï¼š
            
            â€¢ ä¸€èˆ¬æƒ…å†µåŠ s(ä¾‹ï¼šcatâ†’cats)
            â€¢ ä»¥s/x/sh/chç»“å°¾åŠ es(ä¾‹ï¼šboxâ†’boxes)
            â€¢ ä»¥è¾…éŸ³å­—æ¯+yç»“å°¾ï¼Œå˜yä¸ºiå†åŠ es(ä¾‹ï¼šbabyâ†’babies)
            â€¢ ä»¥f/feç»“å°¾ï¼Œå˜f/feä¸ºvå†åŠ es(ä¾‹ï¼šleafâ†’leaves)
            â€¢ ä¸è§„åˆ™å˜åŒ–éœ€å•ç‹¬è®°å¿†(ä¾‹ï¼šchildâ†’children)
          </text>
        </view>
        <view class="knowledge-actions">
          <button class="knowledge-btn close-btn" bindtap="closeSuffixCard">å…³é—­</button>
          <button class="knowledge-btn practice-btn" bindtap="goSuffixTable">è¿›å…¥ä¸“é¡¹ç»ƒä¹ è¡¨æ ¼</button>
        </view>
      </view>
    </view>
  </view>

  <!-- ä¹¦å†™è§„åˆ™çŸ¥è¯†å¡ç‰‡ -->
  <view class="modal-overlay" wx:if="{{showRuleCard}}" bindtap="closeRuleCard">
    <view class="modal-content knowledge-card" catchtap="stopPropagation">
      <view class="modal-header">
        <text class="modal-title">â“ {{currentNoteData.frontendName || 'ä¹¦å†™è§„åˆ™çŸ¥è¯†å¡'}}</text>
        <text class="modal-close" bindtap="closeRuleCard">Ã—</text>
      </view>
      <view class="modal-body">
        <view class="knowledge-content">
          <!-- ä½¿ç”¨åŸç”ŸWXMLç»„ä»¶æ˜¾ç¤ºç»“æ„åŒ–å†…å®¹ -->
          <view wx:if="{{currentStructuredContent && currentStructuredContent.length > 0}}" class="structured-note-content">
            <view wx:for="{{currentStructuredContent}}" wx:key="index" wx:for-item="section" class="note-section">
              <view class="section-title">{{section.title}}</view>
              
              <!-- å­ç« èŠ‚ -->
              <view wx:if="{{section.subsections.length > 0}}">
                <view wx:for="{{section.subsections}}" wx:key="subIndex" wx:for-item="subsection" wx:for-index="subIndex" class="subsection">
                  <view class="subsection-title">{{subsection.title}}</view>
                  <view wx:for="{{subsection.items}}" wx:key="itemIndex" wx:for-item="item" wx:for-index="itemIndex" class="note-item">
                    <!-- è§„åˆ™ä¸ä¾‹å­ç»„åˆ -->
                    <view wx:if="{{item.type === 'rule-with-examples'}}" class="rule-examples-group">
                      <view class="rule-text">{{item.rule.content}}</view>
                      <view wx:for="{{item.examples}}" wx:key="exampleIndex" wx:for-item="example" wx:for-index="exampleIndex" class="example-item">
                        {{example.content}}
                      </view>
                    </view>
                    <!-- é¢˜ç›®ä¸ç­”æ¡ˆç»„åˆ -->
                    <view wx:elif="{{item.type === 'question-with-answer'}}" class="question-answer-group">
                      <view class="question-text">{{item.question.content}}</view>
                      <view class="answer-text">{{item.answer.content}}</view>
                    </view>
                    <!-- å¾ªç¯ç»“æ„ç»„ -->
                    <view wx:elif="{{item.type === 'cycle-group'}}" class="cycle-group">
                      <view wx:for="{{item.items}}" wx:key="cycleIndex" wx:for-item="cycleItem" wx:for-index="cycleIndex" class="cycle-item">
                        <view wx:if="{{cycleIndex === 0}}" class="cycle-hint">{{cycleItem.content}}</view>
                        <view wx:elif="{{cycleIndex === 1}}" class="cycle-question">{{cycleItem.content}}</view>
                        <view wx:elif="{{cycleIndex === 2}}" class="cycle-answer">{{cycleItem.content}}</view>
                        <view wx:else class="cycle-extra">{{cycleItem.content}}</view>
                      </view>
                    </view>
                    <!-- åˆ—è¡¨é¡¹ -->
                    <view wx:elif="{{item.type === 'list'}}" class="list-item">â€¢ {{item.content}}</view>
                                       <!-- è¡¨æ ¼ -->
                   <view wx:elif="{{item.type === 'table'}}" class="table-container">
                     <view class="table-row header">
                       <view wx:for="{{item.data.headers}}" wx:key="headerIndex" wx:for-item="header" wx:for-index="headerIndex" class="table-cell header-cell">
                         <text class="table-text header-text">{{header}}</text>
                       </view>
                     </view>
                     <view wx:for="{{item.data.rows}}" wx:key="rowIndex" wx:for-item="row" wx:for-index="rowIndex" class="table-row">
                       <view wx:for="{{row}}" wx:key="cellIndex" wx:for-item="cell" wx:for-index="cellIndex" class="table-cell">
                         <text class="table-text">{{cell}}</text>
                       </view>
                     </view>
                   </view>
                   <!-- ç»ƒä¹ è¡¨æ ¼ -->
                   <view wx:elif="{{item.type === 'practice-table'}}" class="practice-table-container">
                     <view class="practice-table-title">{{item.title}}</view>
                     <view class="table-row header">
                       <view wx:for="{{item.data.headers}}" wx:key="headerIndex" wx:for-item="header" wx:for-index="headerIndex" class="table-cell header-cell">
                         <text class="table-text header-text">{{header}}</text>
                       </view>
                     </view>
                     <view wx:for="{{item.data.rows}}" wx:key="rowIndex" wx:for-item="row" wx:for-index="rowIndex" class="table-row">
                       <view wx:for="{{row}}" wx:key="cellIndex" wx:for-item="cell" wx:for-index="cellIndex" class="table-cell">
                         <text class="table-text">{{cell}}</text>
                       </view>
                     </view>
                   </view>
                   <!-- ç¤ºä¾‹ -->
                   <view wx:elif="{{item.type === 'example'}}" class="example-item">{{item.content}}</view>
                   <!-- æ”¹é”™é¢˜ -->
                   <view wx:elif="{{item.type === 'correction'}}" class="correction-item">{{item.content}}</view>
                    <!-- æ™®é€šæ–‡æœ¬ -->
                    <view wx:else class="text-item">{{item.content}}</view>
                  </view>
                </view>
              </view>
              
              <!-- ç›´æ¥é¡¹ç›® -->
              <view wx:else>
                <view wx:for="{{section.items}}" wx:key="itemIndex" wx:for-item="item" wx:for-index="itemIndex" class="note-item">
                  <!-- è€ƒå¯Ÿç¤ºä¾‹æ ‡é¢˜ -->
                  <view wx:if="{{item.type === 'exam-example-title'}}" class="exam-example-title">{{item.content}}</view>
                  <!-- é¢˜ç›® -->
                  <view wx:elif="{{item.type === 'question'}}" class="question-item">{{item.content}}</view>
                  <!-- ç­”æ¡ˆ -->
                  <view wx:elif="{{item.type === 'answer'}}" class="answer-item">{{item.content}}</view>
                  <!-- è§£æ -->
                  <view wx:elif="{{item.type === 'analysis'}}" class="analysis-item">{{item.content}}</view>
                  <!-- åˆ—è¡¨é¡¹ -->
                  <view wx:elif="{{item.type === 'list'}}" class="list-item">â€¢ {{item.content}}</view>
                  <!-- è¡¨æ ¼ -->
                  <view wx:elif="{{item.type === 'table'}}" class="table-container">
                    <view class="table-row header">
                      <view wx:for="{{item.data.headers}}" wx:key="headerIndex" wx:for-item="header" wx:for-index="headerIndex" class="table-cell header-cell">
                        <text class="table-text header-text">{{header}}</text>
                      </view>
                    </view>
                    <view wx:for="{{item.data.rows}}" wx:key="rowIndex" wx:for-item="row" wx:for-index="rowIndex" class="table-row">
                      <view wx:for="{{row}}" wx:key="cellIndex" wx:for-item="cell" wx:for-index="cellIndex" class="table-cell">
                        <text class="table-text">{{cell}}</text>
                      </view>
                    </view>
                  </view>
                  <!-- æ™®é€šæ–‡æœ¬ -->
                  <view wx:else class="text-item">{{item.content}}</view>
                </view>
              </view>
            </view>
          </view>
          
          <!-- å¤‡ç”¨ï¼šä½¿ç”¨rich-textç»„ä»¶æ˜¾ç¤ºå†…å®¹ -->
          <rich-text wx:elif="{{currentNoteData}}" class="knowledge-rich-text" nodes="{{currentNoteData.htmlContent || currentNoteData.noteContent || currentNoteData.content}}"></rich-text>
          
          <!-- é»˜è®¤å†…å®¹ -->
          <text class="knowledge-text" wx:else>
            åŠ¨è¯åˆ†è¯å˜åŒ–è§„åˆ™ï¼š
            
            â€¢ ç°åœ¨åˆ†è¯ä¸€èˆ¬åŠ ing(ä¾‹ï¼šgoâ†’going)
            â€¢ è¿‡å»åˆ†è¯è§„åˆ™éœ€ç»“åˆæ—¶æ€(ä¾‹ï¼šworkâ†’worked)
            â€¢ ä¸è§„åˆ™åŠ¨è¯éœ€å•ç‹¬è®°å¿†(ä¾‹ï¼šseeâ†’seen)
            â€¢ åŒå†™è¾…éŸ³å­—æ¯è§„åˆ™(ä¾‹ï¼šrunâ†’running)
            â€¢ å»eåŠ ingè§„åˆ™(ä¾‹ï¼šwriteâ†’writing)
          </text>
        </view>
        <view class="knowledge-actions">
          <button class="knowledge-btn close-btn" bindtap="closeRuleCard">å…³é—­</button>
          <button class="knowledge-btn practice-btn" bindtap="goRuleTable">è¿›å…¥ä¸“é¡¹ç»ƒä¹ è¡¨æ ¼</button>
        </view>
      </view>
    </view>
  </view>

  <!-- æ–°å¢ï¼šè¡¨æ ¼ç»ƒä¹ å¡ç‰‡ -->
  <view class="modal-overlay" wx:if="{{showTableCard}}" bindtap="closeTableCard">
    <view class="modal-content table-card" catchtap="stopPropagation">
      <view class="modal-header">
        <text class="modal-title">ğŸ“Š {{currentTableData.frontendName || 'ä¸“é¡¹ç»ƒä¹ è¡¨æ ¼'}}</text>
        <text class="modal-close" bindtap="closeTableCard">Ã—</text>
      </view>
      <view class="modal-body">
        <view class="table-content" wx:if="{{currentTableData}}">
          <!-- å¯æ»‘åŠ¨çš„è¡¨æ ¼å®¹å™¨ -->
          <scroll-view class="table-scroll-container" scroll-x="true">
            <view class="interactive-table {{currentTableData.id.startsWith('preposition_table_') ? 'preposition-table' : ''}}">
              <!-- è¡¨æ ¼å†…å®¹ -->
              <view class="table-row" wx:for="{{currentTableData.exerciseRows}}" wx:for-item="row" wx:for-index="rowIndex" wx:key="rowIndex">
                <view class="table-cell {{currentTableData.hasHeader && rowIndex === 0 ? 'header-cell' : ''}}" wx:for="{{row}}" wx:for-item="cell" wx:for-index="colIndex" wx:key="colIndex">
                  <!-- è¡¨å¤´è¡Œ -->
                  <text wx:if="{{currentTableData.hasHeader && rowIndex === 0}}" class="table-text header-text">{{cell.text}}</text>
                  <!-- æ•°æ®è¡Œ -->
                  <view wx:else>
                    <!-- æ˜¾ç¤ºç­”æ¡ˆæ¨¡å¼ -->
                    <text wx:if="{{showTableAnswers && cell.type === 'input'}}" class="table-answer correct-answer">{{cell.answer}}</text>
                    <!-- å¤šè¾“å…¥æ¡†æ˜¾ç¤ºç­”æ¡ˆæ¨¡å¼ -->
                    <view wx:elif="{{showTableAnswers && cell.type === 'multi-input'}}" class="multi-answer">
                      <text wx:for="{{cell.answers}}" wx:for-item="answer" wx:key="index" class="table-answer correct-answer">{{answer}}</text>
                    </view>
                    <!-- è¾“å…¥æ¨¡å¼ -->
                    <input 
                      wx:elif="{{!showTableAnswers && cell.type === 'input'}}"
                      class="table-input {{tableInputStatus[currentTableData.id + '_' + rowIndex + '_' + colIndex]}}"
                      type="text"
                      value="{{tableUserInputs[currentTableData.id + '_' + rowIndex + '_' + colIndex]}}"
                      bindinput="onTableInput"
                      data-row="{{rowIndex}}"
                      data-col="{{colIndex}}"
                      placeholder="{{cell.placeholder || 'è¯·è¾“å…¥ç­”æ¡ˆ'}}"
                    />
                    <!-- å¤šè¾“å…¥æ¡†æ¨¡å¼ -->
                    <view wx:elif="{{!showTableAnswers && cell.type === 'multi-input'}}" class="multi-input-container">
                      <input 
                        wx:for="{{cell.answers}}" wx:for-item="answer" wx:for-index="answerIndex" wx:key="answerIndex"
                        class="table-input {{tableInputStatus[currentTableData.id + '_' + rowIndex + '_' + colIndex + '_' + answerIndex]}}"
                        type="text"
                        value="{{tableUserInputs[currentTableData.id + '_' + rowIndex + '_' + colIndex + '_' + answerIndex]}}"
                        bindinput="onTableInput"
                        data-row="{{rowIndex}}"
                        data-col="{{colIndex}}"
                        data-answer-index="{{answerIndex}}"
                        placeholder="{{cell.placeholder || 'è¯·è¾“å…¥ç­”æ¡ˆ'}}"
                      />
                    </view>
                    <!-- åˆ†ç¦»æ˜¾ç¤ºæ¨¡å¼ï¼šé¢˜ç›®åœ¨ä¸Šï¼Œç­”é¢˜æ¡†åœ¨ä¸‹ -->
                    <view wx:elif="{{!showTableAnswers && cell.type === 'separated-input'}}" class="separated-input-container">
                      <!-- æ˜¾ç¤ºé¢˜ç›® -->
                      <text class="question-text">{{cell.question}}</text>
                      <!-- æ˜¾ç¤ºç­”æ¡ˆï¼ˆæŸ¥çœ‹ç­”æ¡ˆæ¨¡å¼ï¼‰ -->
                      <view wx:if="{{showTableAnswers}}" class="answer-display">
                        <text wx:for="{{cell.answers}}" wx:for-item="answer" wx:for-index="answerIndex" wx:key="answerIndex" class="table-answer correct-answer">{{answer}}</text>
                      </view>
                      <!-- æ˜¾ç¤ºè¾“å…¥æ¡†ï¼ˆç­”é¢˜æ¨¡å¼ï¼‰ -->
                      <view wx:else class="input-container">
                        <input 
                          wx:for="{{cell.answers}}" wx:for-item="answer" wx:for-index="answerIndex" wx:key="answerIndex"
                          class="table-input {{tableInputStatus[currentTableData.id + '_' + rowIndex + '_' + colIndex + '_' + answerIndex]}}"
                          type="text"
                          value="{{tableUserInputs[currentTableData.id + '_' + rowIndex + '_' + colIndex + '_' + answerIndex]}}"
                          bindinput="onTableInput"
                          data-row="{{rowIndex}}"
                          data-col="{{colIndex}}"
                          data-answer-index="{{answerIndex}}"
                          placeholder="è¯·è¾“å…¥ç­”æ¡ˆ"
                        />
                      </view>
                    </view>
                    <!-- å¯ç‚¹å‡»è§„åˆ™ -->
                    <view wx:elif="{{cell.type === 'clickable-rule'}}" class="clickable-rule" bindtap="onRuleTap" data-row="{{rowIndex}}" data-col="{{colIndex}}" data-rule-text="{{cell.text}}" data-full-content="{{cell.fullContent}}">
                      <text class="lightbulb" style="color:{{ruleShowFullContent[rowIndex + '_' + colIndex] ? '#eb2f96' : '#ccc'}}">ğŸ’¡</text>
                      <text class="rule-text">{{ruleShowFullContent[rowIndex + '_' + colIndex] ? cell.fullContent : cell.text}}</text>
                    </view>
                    <!-- å•è¯è¾“å…¥æ¡†ï¼ˆç”¨äºå½¢å®¹è¯è¡¨æ ¼ï¼‰ -->
                    <view wx:elif="{{cell.type === 'word-input'}}" class="word-input-container">
                      <text class="word-hint">{{cell.word}}</text>
                      <input 
                        class="table-input {{tableInputStatus[currentTableData.id + '_' + rowIndex + '_' + colIndex]}}"
                        type="text"
                        value="{{tableUserInputs[currentTableData.id + '_' + rowIndex + '_' + colIndex]}}"
                        bindinput="onTableInput"
                        data-row="{{rowIndex}}"
                        data-col="{{colIndex}}"
                        placeholder="{{cell.placeholder}}"
                      />
                    </view>
                    <!-- æ™®é€šæ–‡æœ¬ -->
                    <text wx:else class="table-text">{{cell.text}}</text>
                  </view>
                </view>
              </view>
            </view>
          </scroll-view>
        </view>
        <view class="table-actions">
          <button class="table-btn answer-btn" bindtap="{{showTableAnswers ? 'hideTableAnswers' : 'showTableAnswers'}}">
            {{showTableAnswers ? 'éšè—ç­”æ¡ˆ' : 'æŸ¥çœ‹ç­”æ¡ˆ'}}
          </button>
          <button class="table-btn practice-btn" bindtap="goTablePractice">å¼€å§‹ç»ƒä¹ </button>
        </view>
      </view>
    </view>
  </view>

  <!-- å¯¼å‡ºæ¨¡æ€æ¡† -->
  <include src="./export-modal.wxml" />

  <!-- æµ®åŠ¨åé¦ˆæŒ‰é’® -->
  <floating-feedback show="{{true}}" />
</view>

