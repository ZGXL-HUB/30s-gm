<view class="container">
  <!-- 页面引导卡片 -->
  <page-header-guide 
    title="语法综合练习"
    description="选择难度和练习模式，进行多语法点混合练习，提升综合应用能力"
    tip="💡 提示：建议从初级开始，逐步提升难度"
    icon="🎯"
    storage-key="grammar-overview-guide"
  />
  
  <!-- 页面标题 -->
  <view class="header">
    <view class="title">语法综合练习</view>
    <view class="subtitle">多语法点混合练习，提升综合能力</view>
  </view>

  <!-- 难度选择 -->
  <view class="difficulty-section">
    <view class="section-title">选择难度</view>
    <view class="difficulty-buttons">
      <view class="difficulty-btn {{selectedDifficulty === 'beginner' ? 'active' : ''}}" 
            bindtap="selectDifficulty" 
            data-difficulty="beginner">
        <view class="difficulty-icon">🌱</view>
        <view class="difficulty-text">
          <view class="difficulty-name">初级</view>
          <view class="difficulty-desc">基础语法，轻松入门</view>
        </view>
      </view>
      <view class="difficulty-btn {{selectedDifficulty === 'intermediate' ? 'active' : ''}}" 
            bindtap="selectDifficulty" 
            data-difficulty="intermediate">
        <view class="difficulty-icon">🌳</view>
        <view class="difficulty-text">
          <view class="difficulty-name">中级</view>
          <view class="difficulty-desc">综合应用，稳步提升</view>
        </view>
      </view>
      <view class="difficulty-btn {{selectedDifficulty === 'advanced' ? 'active' : ''}}" 
            bindtap="selectDifficulty" 
            data-difficulty="advanced">
        <view class="difficulty-icon">🌲</view>
        <view class="difficulty-text">
          <view class="difficulty-name">高级</view>
          <view class="difficulty-desc">深度挑战，精通语法</view>
        </view>
      </view>
    </view>
  </view>

  <!-- 练习模式 -->
  <view class="mode-section">
    <view class="section-title">练习模式</view>
    <view class="mode-cards">
      <view class="mode-card {{selectedMode === 'quick' ? 'active' : ''}}" 
            bindtap="selectMode" 
            data-mode="quick">
        <view class="mode-icon">⚡</view>
        <view class="mode-name">快速练习</view>
        <view class="mode-desc">10题混合，快速检验</view>
      </view>
      <view class="mode-card {{selectedMode === 'comprehensive' ? 'active' : ''}}" 
            bindtap="selectMode" 
            data-mode="comprehensive">
        <view class="mode-icon">🎯</view>
        <view class="mode-name">综合练习</view>
        <view class="mode-desc">20题全面，深度练习</view>
      </view>
      <view class="mode-card {{selectedMode === 'challenge' ? 'active' : ''}}" 
            bindtap="selectMode" 
            data-mode="challenge">
        <view class="mode-icon">🏆</view>
        <view class="mode-name">挑战模式</view>
        <view class="mode-desc">限时答题，挑战自我</view>
      </view>
    </view>
  </view>

  <!-- 学习进度 -->
  <view class="progress-section">
    <view class="section-title">学习进度</view>
    <view class="progress-cards">
      <view class="progress-card">
        <view class="progress-icon">📊</view>
        <view class="progress-info">
          <view class="progress-name">已完成题目</view>
          <view class="progress-value">{{completedQuestions}}/{{totalQuestions}}</view>
        </view>
        <view class="progress-bar">
          <view class="progress-fill" style="width: {{progressPercent}}%"></view>
        </view>
      </view>
      <view class="progress-card">
        <view class="progress-icon">🎯</view>
        <view class="progress-info">
          <view class="progress-name">正确率</view>
          <view class="progress-value">{{accuracyRate}}%</view>
        </view>
        <view class="accuracy-indicator {{accuracyRate >= 80 ? 'excellent' : accuracyRate >= 60 ? 'good' : 'needs-improvement'}}">
          {{accuracyRate >= 80 ? '优秀' : accuracyRate >= 60 ? '良好' : '需加强'}}
        </view>
      </view>
    </view>
  </view>

  <!-- 推荐练习 -->
  <view class="recommendation-section">
    <view class="section-title">推荐练习</view>
    <view class="recommendation-cards">
      <view class="recommendation-card" bindtap="startRecommendedPractice" data-type="weak">
        <view class="recommendation-icon">🎯</view>
        <view class="recommendation-content">
          <view class="recommendation-name">薄弱语法点</view>
          <view class="recommendation-desc">基于错题分析，针对性练习</view>
        </view>
        <view class="recommendation-arrow">→</view>
      </view>
      <view class="recommendation-card" bindtap="startRecommendedPractice" data-type="mixed">
        <view class="recommendation-icon">🌟</view>
        <view class="recommendation-content">
          <view class="recommendation-name">混合练习</view>
          <view class="recommendation-desc">多语法点综合应用</view>
        </view>
        <view class="recommendation-arrow">→</view>
      </view>
    </view>
  </view>

  <!-- 开始练习按钮 -->
  <view class="start-button-container">
    <button class="start-button" 
            bindtap="startPractice" 
            disabled="{{!selectedDifficulty || !selectedMode}}">
      <view class="button-icon">🚀</view>
      <view class="button-text">开始练习</view>
    </button>
  </view>

  <!-- 最近练习记录 -->
  <view class="recent-section" wx:if="{{recentPractices.length > 0}}">
    <view class="section-title">最近练习</view>
    <view class="recent-list">
      <view class="recent-item" wx:for="{{recentPractices}}" wx:key="id">
        <view class="recent-info">
          <view class="recent-title">{{item.title}}</view>
          <view class="recent-stats">{{item.correct}}/{{item.total}} 正确</view>
          <view class="recent-date">{{item.date}}</view>
        </view>
        <view class="recent-score {{item.score >= 80 ? 'excellent' : item.score >= 60 ? 'good' : 'needs-improvement'}}">
          {{item.score}}分
        </view>
      </view>
    </view>
  </view>
</view> 