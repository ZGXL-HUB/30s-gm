<!-- å­¦ç”Ÿç«¯ä½œä¸šåˆ—è¡¨é¡µé¢ -->
<view class="container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="header">
    <text class="title">æˆ‘çš„ä½œä¸š</text>
    <text class="subtitle">å®Œæˆè€å¸ˆå¸ƒç½®çš„è¯­æ³•ç»ƒä¹ </text>
  </view>

  <!-- æ ‡ç­¾é¡µåˆ‡æ¢ -->
  <view class="tabs">
    <view 
      class="tab {{currentTab === 'pending' ? 'active' : ''}}" 
      bindtap="switchTab" 
      data-tab="pending"
    >
      å¾…å®Œæˆ ({{getCurrentAssignments().length}})
    </view>
    <view 
      class="tab {{currentTab === 'completed' ? 'active' : ''}}" 
      bindtap="switchTab" 
      data-tab="completed"
    >
      å·²å®Œæˆ ({{getCurrentAssignments().length}})
    </view>
  </view>

  <!-- ä½œä¸šåˆ—è¡¨ -->
  <view class="assignment-list" wx:if="{{!loading}}">
    <view 
      wx:for="{{getCurrentAssignments()}}" 
      wx:key="_id" 
      class="assignment-item {{item.isExpired ? 'expired' : ''}}"
    >
      <view class="assignment-header">
        <text class="assignment-title">{{item.title}}</text>
        <text class="assignment-status {{item.status}}">{{item.statusText}}</text>
      </view>
      
      <view class="assignment-info">
        <view class="info-item">
          <text class="info-label">æˆªæ­¢æ—¶é—´ï¼š</text>
          <text class="info-value">{{formatTime(item.deadline)}}</text>
        </view>
        <view class="info-item">
          <text class="info-label">é¢˜ç›®æ•°é‡ï¼š</text>
          <text class="info-value">{{item.questions.length}}é¢˜</text>
        </view>
        <view class="info-item" wx:if="{{item.status === 'completed'}}">
          <text class="info-label">å¾—åˆ†ï¼š</text>
          <text class="info-value">{{item.score}}/{{item.totalScore}}</text>
        </view>
        <view class="info-item" wx:if="{{item.status === 'completed'}}">
          <text class="info-label">æ­£ç¡®ç‡ï¼š</text>
          <text class="info-value">{{item.accuracy}}%</text>
        </view>
        <view class="info-item" wx:if="{{!item.isExpired && item.status !== 'completed'}}">
          <text class="info-label">å‰©ä½™æ—¶é—´ï¼š</text>
          <text class="info-value remaining">{{formatRemainingTime(item.deadline)}}</text>
        </view>
      </view>
      
      <view class="assignment-actions">
        <button 
          class="action-btn primary" 
          bindtap="startAssignment" 
          data-id="{{item._id}}"
          wx:if="{{item.canSubmit}}"
        >
          å¼€å§‹ç»ƒä¹ 
        </button>
        <button 
          class="action-btn secondary" 
          bindtap="viewAssignmentResult" 
          data-id="{{item._id}}"
          wx:if="{{item.status === 'completed'}}"
        >
          æŸ¥çœ‹ç»“æœ
        </button>
        <button 
          class="action-btn disabled" 
          wx:if="{{item.isExpired && item.status !== 'completed'}}"
        >
          å·²è¿‡æœŸ
        </button>
      </view>
    </view>
    
    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{getCurrentAssignments().length === 0}}">
      <text class="empty-icon">ğŸ“š</text>
      <text class="empty-text">æš‚æ— {{currentTab === 'pending' ? 'å¾…å®Œæˆ' : 'å·²å®Œæˆ'}}çš„ä½œä¸š</text>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-state" wx:if="{{loading}}">
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>
</view>
