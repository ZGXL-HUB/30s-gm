<!--意见反馈页面-->
<view class="container">
  <view class="feedback-content">
    <!-- 反馈输入区域 -->
    <view class="feedback-section">
      <view class="section-title">请告诉我们您的想法 <text class="optional">(选填)</text></view>
      <view class="section-desc">无论是遇到的麻烦、发现的错误,还是新的功能点子,都可以写在这里。</view>
      <view class="textarea-wrapper">
        <textarea 
          class="feedback-textarea"
          placeholder="(例如:题目太难了 / 希望增加打印功能 / 第5题答案好像不对)"
          value="{{feedbackContent}}"
          bindinput="onFeedbackInput"
          maxlength="800"
          show-confirm-bar="{{false}}"
        ></textarea>
        <view class="char-count">{{feedbackContent.length}}/800</view>
      </view>
    </view>

    <!-- 提交按钮 -->
    <view class="submit-section">
      <button 
        class="submit-btn {{canSubmit ? 'active' : 'disabled'}}"
        bindtap="submitFeedback"
        disabled="{{!canSubmit || submitting}}"
      >
        {{submitting ? '提交中...' : '提交反馈'}}
      </button>
    </view>

    <!-- 查看历史记录 -->
    <view class="history-section">
      <button class="history-btn" bindtap="viewHistory">
        <text class="history-icon">📄</text>
        <text class="history-text">查看我的反馈记录</text>
      </button>
    </view>
  </view>

  <!-- 提交成功模态框 -->
  <view class="modal-overlay" wx:if="{{showSuccessModal}}" bindtap="hideSuccessModal">
    <view class="modal-content" catchtap="">
      <view class="modal-header">
        <view class="modal-title">反馈提交成功</view>
        <view class="modal-close" bindtap="hideSuccessModal">×</view>
      </view>
      
      <view class="modal-body">
        <view class="success-icon">✅</view>
        <view class="success-message">
          <view class="success-title">感谢您的反馈！</view>
          <view class="success-desc">
            我们已收到您的反馈，反馈编号：{{feedbackId}}<br/>
            我们会在3个工作日内处理并回复您
          </view>
        </view>
        
        <view class="modal-actions">
          <button class="modal-btn secondary" bindtap="hideSuccessModal">继续反馈</button>
          <button class="modal-btn primary" bindtap="goBack">返回首页</button>
        </view>
      </view>
    </view>
  </view>
</view>
