<!-- æ•™å¸ˆç«¯ä¸»ç•Œé¢ - æŒ‰æµç¨‹å›¾è®¾è®¡ -->
<view class="teacher-main">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="header">
    <text class="title">æ•™å¸ˆç«¯</text>
  </view>

  <!-- ä¸»è¦åŠŸèƒ½å…¥å£ -->
  <view class="function-grid">
    <!-- å¸ƒç½®è¯­æ³•ä½œä¸š -->
    <view class="function-card homework-card" bindtap="goToHomework">
      <view class="card-icon">
        <text class="icon">ğŸ“</text>
      </view>
      <view class="card-content">
        <text class="card-title">å¸ƒç½®è¯­æ³•ä½œä¸š</text>
        <text class="card-subtitle">æ™ºèƒ½æ¨è â€¢ é«˜è€ƒé…æ¯” â€¢ ä¸“é¢˜ç»ƒä¹  â€¢ è‡ªé€‰é¢˜ç›®</text>
      </view>
      <view class="card-arrow">â†’</view>
    </view>

    <!-- æˆ‘çš„PPT/å­¦æ¡ˆ -->
    <view class="function-card materials-card" bindtap="goToMaterials">
      <view class="card-icon">
        <text class="icon">ğŸ“Š</text>
      </view>
      <view class="card-content">
        <text class="card-title">æˆ‘çš„PPT/å­¦æ¡ˆ</text>
        <text class="card-subtitle">é…å¥—ææ–™ â€¢ ç‚¹åå™¨ â€¢ æ‘¸åº•æµ‹è¯• â€¢ ææ–™åº“</text>
      </view>
      <view class="card-arrow">â†’</view>
    </view>

    <!-- ç­çº§ç®¡ç† -->
    <view class="function-card class-card" bindtap="goToClass">
      <view class="card-icon">
        <text class="icon">ğŸ‘¥</text>
      </view>
      <view class="card-content">
        <text class="card-title">ç­çº§ç®¡ç†</text>
        <text class="card-subtitle">ç­çº§åˆ—è¡¨ â€¢ å­¦ç”Ÿç®¡ç† â€¢ ç­çº§æ¨¡æ¿ â€¢ æ•°æ®ç»Ÿè®¡</text>
      </view>
      <view class="card-arrow">â†’</view>
    </view>
  </view>

  <!-- æœ€è¿‘æ´»åŠ¨ -->
  <view class="recent-section">
    <view class="section-header">
      <text class="section-title">æœ€è¿‘æ´»åŠ¨</text>
      <text class="section-more" bindtap="viewAllActivities">æŸ¥çœ‹å…¨éƒ¨</text>
    </view>
    
    <view class="activity-list">
      <view 
        class="activity-item"
        wx:for="{{recentActivities}}" 
        wx:key="id"
        bindtap="viewActivity"
        data-id="{{item.id}}"
      >
        <view class="activity-icon">
          <text class="icon">{{item.icon}}</text>
        </view>
        <view class="activity-content">
          <text class="activity-title">{{item.title}}</text>
          <text class="activity-desc">{{item.description}}</text>
          <text class="activity-time">{{item.time}}</text>
        </view>
        <view class="activity-status status-{{item.status}}">
          <text class="status-text">{{item.statusText}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ä½œä¸šè¯¦æƒ…å¼¹çª— -->
  <view class="modal" wx:if="{{showAssignmentDetail}}">
    <view class="modal-content">
      <view class="modal-header">
        <text class="title">ä½œä¸šè¯¦æƒ…</text>
        <text class="close" bindtap="closeAssignmentDetail">Ã—</text>
      </view>
      
      <view class="modal-body" wx:if="{{selectedAssignment}}">
        <view class="assignment-detail">
          <view class="detail-item">
            <text class="label">ä½œä¸šæ ‡é¢˜ï¼š</text>
            <text class="value">{{selectedAssignment.title}}</text>
          </view>
          <view class="detail-item" wx:if="{{selectedAssignment.remark}}">
            <text class="label">å¤‡æ³¨å†…å®¹ï¼š</text>
            <text class="value">{{selectedAssignment.remark}}</text>
          </view>
          <view class="detail-item">
            <text class="label">æˆªæ­¢æ—¶é—´ï¼š</text>
            <text class="value">{{selectedAssignment.deadline}}</text>
          </view>
          <view class="detail-item">
            <text class="label">å®Œæˆè¿›åº¦ï¼š</text>
            <text class="value">å·²å®Œæˆ {{selectedAssignment.completedCount || 12}}/{{selectedAssignment.totalCount || 33}} äºº</text>
          </view>
          <view class="detail-item">
            <text class="label">å¹³å‡æ­£ç¡®ç‡ï¼š</text>
            <text class="value">{{selectedAssignment.averageAccuracy || 78}}%</text>
          </view>
          <view class="detail-item">
            <text class="label">åˆ›å»ºæ—¶é—´ï¼š</text>
            <text class="value">{{selectedAssignment.createdAt}}</text>
          </view>
        </view>
      </view>
      
      <view class="modal-footer">
        <button class="btn btn-primary" bindtap="closeAssignmentDetail">ç¡®å®š</button>
      </view>
    </view>
  </view>

  <!-- ç®€åŒ–çš„å¯¼å‡ºå¼¹çª— -->
  <view class="export-modal" wx:if="{{showExportModal}}">
    <view class="modal-content">
      <view class="modal-header">
        <text class="modal-title">ç”Ÿæˆè®²è¯„ææ–™</text>
        <text class="modal-close" bindtap="closeExportModal">Ã—</text>
      </view>
      
      <view class="modal-body">
        <view class="format-options">
          <view class="format-option" bindtap="generateExport" data-format="ppt">
            <view class="format-icon">ğŸ“Š</view>
            <view class="format-info">
              <text class="format-name">PPTæ ¼å¼</text>
              <text class="format-desc">è¯¾å ‚è®²è¯„ç”¨</text>
            </view>
          </view>
          
          <view class="format-option" bindtap="generateExport" data-format="word">
            <view class="format-icon">ğŸ“„</view>
            <view class="format-info">
              <text class="format-name">Wordæ ¼å¼</text>
              <text class="format-desc">æ‰“å°åˆ†å‘ç”¨</text>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- æµ®åŠ¨åé¦ˆæŒ‰é’® -->
  <floating-feedback show="{{true}}" />
</view>
