<!--学生加入班级页面-->
<view class="container">
  <!-- 页面标题 -->
  <view class="page-header">
    <text class="page-title">加入班级</text>
    <text class="page-subtitle">输入邀请码加入班级</text>
  </view>

  <!-- 邀请码输入区域 -->
  <view class="input-section">
    <view class="input-group">
      <text class="input-label">班级邀请码</text>
      <input 
        class="invite-code-input" 
        type="text" 
        placeholder="请输入6位数字邀请码"
        value="{{inviteCode}}"
        maxlength="6"
        bindinput="onInviteCodeInput"
        focus="{{true}}"
      />
    </view>
    
    <button 
      class="btn btn-primary btn-block" 
      bindtap="joinClass"
      loading="{{loading}}"
      disabled="{{!inviteCode || inviteCode.length !== 6}}"
    >
      {{loading ? '验证中...' : '加入班级'}}
    </button>
  </view>

  <!-- 班级信息预览 -->
  <view class="class-preview" wx:if="{{classInfo}}">
    <view class="preview-card">
      <view class="card-header">
        <text class="class-name">{{classInfo.className}}</text>
        <text class="teacher-name">教师：{{classInfo.teacherName}}</text>
      </view>
      
      <view class="class-stats">
        <view class="stat-item">
          <text class="stat-label">班级人数</text>
          <text class="stat-value">{{classInfo.currentStudents}}/{{classInfo.maxStudents}}</text>
        </view>
        <view class="stat-item">
          <text class="stat-label">剩余名额</text>
          <text class="stat-value">{{classInfo.remainingSlots}}</text>
        </view>
      </view>
      
      <button 
        class="btn btn-success btn-block" 
        bindtap="confirmJoinClass"
        loading="{{joining}}"
      >
        {{joining ? '加入中...' : '确认加入'}}
      </button>
    </view>
  </view>

  <!-- 错误提示 -->
  <view class="error-message" wx:if="{{errorMessage}}">
    <text class="error-text">{{errorMessage}}</text>
  </view>

  <!-- 成功提示 -->
  <view class="success-message" wx:if="{{successMessage}}">
    <view class="success-icon">✅</view>
    <text class="success-text">{{successMessage}}</text>
    <button class="btn btn-outline" bindtap="goToStudentCenter">进入学生中心</button>
  </view>

  <!-- 帮助信息 -->
  <view class="help-section">
    <view class="help-title">如何获取邀请码？</view>
    <view class="help-content">
      <text class="help-item">• 向您的老师索取班级邀请码</text>
      <text class="help-item">• 邀请码通常为6位数字</text>
      <text class="help-item">• 邀请码有时效性，请及时使用</text>
    </view>
  </view>

  <!-- 学生信息确认 -->
  <view class="student-info-section" wx:if="{{showStudentInfo}}">
    <view class="info-card">
      <view class="card-title">确认学生信息</view>
      
      <view class="info-item">
        <text class="info-label">姓名</text>
        <input 
          class="info-input" 
          type="text" 
          placeholder="请输入您的姓名"
          value="{{studentInfo.name}}"
          bindinput="onStudentNameInput"
        />
      </view>
      
      <view class="info-item">
        <text class="info-label">头像</text>
        <button class="avatar-btn" bindtap="chooseAvatar">
          <image 
            class="avatar-preview" 
            src="{{studentInfo.avatarUrl || '/images/icons/avatar.webp'}}"
            mode="aspectFill"
          />
          <text class="avatar-text">选择头像</text>
        </button>
      </view>
      
      <button 
        class="btn btn-primary btn-block" 
        bindtap="confirmStudentInfo"
        disabled="{{!studentInfo.name}}"
      >
        确认信息并加入班级
      </button>
    </view>
  </view>
</view>
